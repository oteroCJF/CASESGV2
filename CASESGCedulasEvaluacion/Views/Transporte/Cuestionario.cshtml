@model CedulasEvaluacion.Entities.MCedula.CedulaEvaluacion;
@{
    ViewData["Title"] = "Cédula del Servicio de Transporte para Personas Servidoras Públicas con Folio: " + Model.Folio;
}

<div class="container-fluid" id="limpieza">
    <a href="/transporte/index/@Model.ServicioId@Model.URL" type='button' class='btn-sm btn-warning float-right mr-2 mb-3' data-toggle="tooltip" title="Regresar al listado de cédulas" data-placement="top" style="padding: 6px 72px; font-size: 22px;"><i class="fas fa-arrow-left"></i></a>
    <a href="#" type='button' id="btn_facturas" class='btn-lg btn-facturas float-right mr-2 mb-3' data-toggle="tooltip" title="Ver/Agregar Factura(s) o Nota(s) de Crédito" data-placement="top"><i class="fal fa-file-invoice"></i></a>
    <div class="row col-lg-12 mt-2 mb-3">
        <table class="table table-info-summary">
            <tbody>
                <tr>
                    <td data-toggle="tooltip" title="Folio de evaluación asignado por el sistema" data-placement="top">
                        <i class="fas fa-file-alt icon-primary"></i> <strong>Folio:</strong> <span class="summary-value">@Model.Folio</span>
                    </td>
                    <td data-toggle="tooltip" title="Año de evaluación del servicio" data-placement="top">
                        <i class="fas fa-calendar-alt icon-primary"></i> <strong>Año:</strong> <span class="summary-value">@Model.Anio</span>
                    </td>
                    <td data-toggle="tooltip" title="Mes evaluado" data-placement="top">
                        <i class="fas fa-calendar-day icon-primary"></i> <strong>Mes:</strong> <span class="summary-value">@Model.Mes</span>
                    </td>
                    <td data-toggle="tooltip" title="Administración/Inmueble evaluado" data-placement="top">
                        <i class="fas fa-building icon-primary"></i> <strong>Inmueble:</strong> <span class="summary-value">@Model.inmuebles.Nombre</span>
                    </td>
                   
                </tr>
                <tr>
                    <td data-toggle="tooltip" title="Estatus de la cédula del servicio de Transporte" data-placement="top">
                        <i class="fas fa-info-circle icon-primary"></i> <strong>Estatus:</strong> <span class="summary-value">@Model.Estatus</span>
                    </td>
                    <td id="total_facturas" data-toggle="tooltip" title='Cantidad de facturas asignadas a el mes de "@Model.Mes" del inmueble "@Model.inmuebles.Nombre"' data-placement="top">
                        <i class="fas fa-file-invoice icon-secondary"></i> <strong>Facturas asignadas:</strong> <span class="summary-value-highlight">@Model.facturas.Count</span>
                    </td>
                    <td id="monto_facturas" data-toggle="tooltip" title="Monto total de las facturas capturadas en este folio" data-placement="top">
                        <i class="fas fa-dollar-sign icon-secondary"></i> <strong>Monto Total IVA Incluido:</strong> <span class="summary-value-highlight">@String.Format(System.Globalization.CultureInfo.CurrentCulture, "{0:C}", @Model.TotalMontoFactura)</span>
                    </td>
                    <td colspan="3"></td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="card">
        <div class="card-header bg-joke text-white">
            <h5 class="mt-2">Evaluación de la cédula</h5>
        </div>
        @if (Model.Folio.Contains("202503N") || Model.Anio > 2025 || (Model.Anio == 2025 && (Model.Mes == "Abril" ||
                                                      Model.Mes == "Mayo" ||
                                                      Model.Mes == "Junio" ||
                                                      Model.Mes == "Julio" ||
                                                      Model.Mes == "Agosto" ||
                                                      Model.Mes == "Septiembre" ||
                                                      Model.Mes == "Octubre" ||
                                                      Model.Mes == "Noviembre" ||
                                                      Model.Mes == "Diciembre")))
        {
            <div class="card-body">
                <div class="row ">
                    <div class="col-lg-12">
                        <div style="margin-bottom: 20px;">
                            <ul class="nav nav-tabs" id="myTab" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <a class="nav-link2 active" id="home-tab" data-toggle="tab" href="#pregunta_1" role="tab" aria-controls="home" aria-selected="true">Pregunta 1</a>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <a class="nav-link2" id="profile-tab" data-toggle="tab" href="#pregunta_2" role="tab" aria-controls="profile" aria-selected="false">Pregunta 2</a>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <a class="nav-link2" id="contact-tab" data-toggle="tab" href="#pregunta_3" role="tab" aria-controls="contact" aria-selected="false">Pregunta 3</a>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <a class="nav-link2" id="contact-tab" data-toggle="tab" href="#pregunta_4" role="tab" aria-controls="contact" aria-selected="false">Pregunta 4</a>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <a class="nav-link2" id="contact-tab" data-toggle="tab" href="#pregunta_5" role="tab" aria-controls="contact" aria-selected="false">Pregunta 5</a>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <a class="nav-link2" id="contact-tab" data-toggle="tab" href="#pregunta_6" role="tab" aria-controls="contact" aria-selected="false">Pregunta 6</a>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <a class="nav-link2" id="contact-tab" data-toggle="tab" href="#pregunta_7" role="tab" aria-controls="contact" aria-selected="false">Pregunta 7</a>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <a class="nav-link2" id="contact-tab" data-toggle="tab" href="#entregables" role="tab" aria-controls="contact" aria-selected="false">Entregables</a>
                                </li>
                            </ul>
                        </div>

                        <div class="tab-content app-tab-content" id="myTabContent">
                            @* Pregunta 1 *@
                            <div class="tab-pane fade p-4 show active" id="pregunta_1" role="tabpanel" aria-labelledby="home-tab">
                                <div class="question-block">
                                    <p class="question-text">1. ¿En qué fecha se estableció el cierre del mes?</p>
                                    <div class="form-group question-input-group">
                                        <label for="fechaCierre" class="form-label">Fecha de Cierre</label>
                                        <input type="date" name="pregunta1" id="detalle1" class="form-control form-control-date pregunta1" style="max-width: 250px;">
                                    </div>
                                </div>
                            </div>
                            @* Fin de la Pregunta 1 *@

                            @* Pregunta 2 *@
                            <div class="tab-pane fade p-4" id="pregunta_2" role="tabpanel" aria-labelledby="profile-tab">
                                <div class="question-block">
                                    <p class="question-text">2. ¿El prestador de servicios cumplió con la prestación del servicio de transporte para las personas servidoras públicas, conforme a los plazos y condiciones establecidas?</p>
                                    <div class="radio-group mt-3">
                                        <div class="icheck-success d-inline radio-option">
                                            <input type="radio" name="pregunta2" value="true" id="radioSuccess1" class="pregunta2" data-pregunta="2">
                                            <label for="radioSuccess1">Sí</label>
                                        </div>
                                        <div class="icheck-success d-inline ml-4 radio-option">
                                            <input type="radio" name="pregunta2" value="false" id="radioSuccess2" class="pregunta2" data-pregunta="2">
                                            <label for="radioSuccess2">No</label>
                                        </div>
                                    </div>
                                    <div class="action-buttons mt-4" id="diviPregunta2">
                                        <button type='button' class='btn btn-primary btn-custom-action mr-3 addIncidencias' data-pregunta="2"><i class="fas fa-plus-circle mr-1"></i> Capturar Incidencia</button>
                                        <button type='button' class='btn btn-outline-secondary btn-custom-action viewIncidencias' data-pregunta="2"><i class="fas fa-eye mr-1"></i> Consultar Incidencias</button>
                                    </div>
                                </div>
                            </div>
                            @* Fin de la Pregunta 2 *@

                            @* Pregunta 3 *@
                            <div class="tab-pane fade p-4" id="pregunta_3" role="tabpanel" aria-labelledby="contact-tab">
                                <div class="question-block">
                                    <p class="question-text">3. ¿El prestador de servicios proporcionó los entregables en los plazos establecidos?</p>
                                    <div class="radio-group mt-3">
                                        <div class="icheck-success d-inline radio-option">
                                            <input type="radio" name="pregunta3" value="true" id="radioSuccess3" class="pregunta3" data-pregunta="3">
                                            <label for="radioSuccess3">Sí</label>
                                        </div>
                                        <div class="icheck-success d-inline ml-4 radio-option">
                                            <input type="radio" name="pregunta3" value="false" id="radioSuccess4" class="pregunta3" data-pregunta="3">
                                            <label for="radioSuccess4">No</label>
                                        </div>
                                    </div>
                                    <div class="action-buttons mt-4" id="diviPregunta3">
                                        <button type='button' class='btn btn-primary btn-custom-action mr-3 addIncidencias' data-pregunta="3"><i class="fas fa-plus-circle mr-1"></i> Capturar Incidencia</button>
                                        <button type='button' class='btn btn-outline-secondary btn-custom-action viewIncidencias' data-pregunta="3"><i class="fas fa-eye mr-1"></i> Consultar Incidencias</button>
                                    </div>
                                </div>
                            </div>
                            @* Fin de la Pregunta 3 *@

                            @* Pregunta 4 *@
                            <div class="tab-pane fade p-4" id="pregunta_4" role="tabpanel" aria-labelledby="contact-tab">
                                <div class="question-block">
                                    <p class="question-text">
                                        4. ¿El servicio se proporcionó de acuerdo al programa de operación con la infraestructura técnica, mecánica, tecnológica y humana solicitadas en el anexo técnico?
                                    </p>
                                    <div class="radio-group mt-3">
                                        <div class="icheck-success d-inline radio-option">
                                            <input type="radio" name="pregunta4" value="true" id="radioSuccess5" class="pregunta4" data-pregunta="4">
                                            <label for="radioSuccess5">Sí</label>
                                        </div>
                                        <div class="icheck-success d-inline ml-4 radio-option">
                                            <input type="radio" name="pregunta4" value="false" id="radioSuccess6" class="pregunta4" data-pregunta="4">
                                            <label for="radioSuccess6">No</label>
                                        </div>
                                    </div>
                                    <div class="action-buttons mt-4" id="diviPregunta4">
                                        <button type='button' class='btn btn-primary btn-custom-action mr-3 addIncidencias' data-pregunta="4"><i class="fas fa-plus-circle mr-1"></i> Capturar Incidencia</button>
                                        <button type='button' class='btn btn-outline-secondary btn-custom-action viewIncidencias' data-pregunta="4"><i class="fas fa-eye mr-1"></i> Consultar Incidencias</button>
                                    </div>
                                </div>
                            </div>
                            @* Fin de la Pregunta 4 *@

                            @* Pregunta 5 *@
                            <div class="tab-pane fade p-4" id="pregunta_5" role="tabpanel" aria-labelledby="contact-tab">
                                <div class="question-block">
                                    <p class="question-text">5. ¿El personal operador del servicio está capacitado y cuenta con experiencia, conforme a lo establecido?</p>
                                    <div class="radio-group mt-3">
                                        <div class="icheck-success d-inline radio-option">
                                            <input type="radio" name="pregunta5" value="true" id="radioSuccess7" class="pregunta5" data-pregunta="5">
                                            <label for="radioSuccess7">Sí</label>
                                        </div>
                                        <div class="icheck-success d-inline ml-4 radio-option">
                                            <input type="radio" name="pregunta5" value="false" id="radioSuccess8" class="pregunta5" data-pregunta="5">
                                            <label for="radioSuccess8">No</label>
                                        </div>
                                    </div>
                                    <div class="action-buttons mt-4" id="diviPregunta5">
                                        <button type='button' class='btn btn-primary btn-custom-action mr-3 addIncidencias' data-pregunta="5"><i class="fas fa-plus-circle mr-1"></i> Capturar Incidencia</button>
                                        <button type='button' class='btn btn-outline-secondary btn-custom-action viewIncidencias' data-pregunta="5"><i class="fas fa-eye mr-1"></i> Consultar Incidencia</button>
                                    </div>
                                </div>
                            </div>
                            @* Fin de la Pregunta 5 *@

                            @* Pregunta 6 *@
                            <div class="tab-pane fade p-4" id="pregunta_6" role="tabpanel" aria-labelledby="contact-tab">
                                <div class="question-block">
                                    <p class="question-text">6. ¿El personal operador del servicio cumplió con las obligaciones generales como conducta, seguridad, uso del servicio, uniforme, gafete, conocer el reglamento de tránsito y la ruta, así como contar con licencia de conducir vigente?</p>
                                    <div class="radio-group mt-3">
                                        <div class="icheck-success d-inline radio-option">
                                            <input type="radio" name="pregunta6" value="true" id="radioSuccess9" class="pregunta6" data-pregunta="6">
                                            <label for="radioSuccess9">Sí</label>
                                        </div>
                                        <div class="icheck-success d-inline ml-4 radio-option">
                                            <input type="radio" name="pregunta6" value="false" id="radioSuccess10" class="pregunta6" data-pregunta="6">
                                            <label for="radioSuccess10">No</label>
                                        </div>
                                    </div>
                                    <div class="action-buttons mt-4" id="diviPregunta6">
                                        <button type='button' class='btn btn-primary btn-custom-action mr-3 addIncidencias' data-pregunta="6"><i class="fas fa-plus-circle mr-1"></i> Capturar Incidencia</button>
                                        <button type='button' class='btn btn-outline-secondary btn-custom-action viewIncidencias' data-pregunta="6"><i class="fas fa-eye mr-1"></i> Consultar Incidencia</button>
                                    </div>
                                </div>
                            </div>
                            @* Fin de la Pregunta 6 *@

                            @* Pregunta 7 *@
                            <div class="tab-pane fade p-4" id="pregunta_7" role="tabpanel" aria-labelledby="contact-tab">
                                <div class="question-block">
                                    <p class="question-text">7. ¿El prestador del servicio cumplió con los horarios y rutas establecidos en el programa de operación?</p>
                                    <div class="radio-group mt-3">
                                        <div class="icheck-success d-inline radio-option">
                                            <input type="radio" name="pregunta7" value="true" id="radioSuccess11" class="pregunta7" data-pregunta="7">
                                            <label for="radioSuccess11">Sí</label>
                                        </div>
                                        <div class="icheck-success d-inline ml-4 radio-option">
                                            <input type="radio" name="pregunta7" value="false" id="radioSuccess12" class="pregunta7" data-pregunta="7">
                                            <label for="radioSuccess12">No</label>
                                        </div>                                      
                                    </div>
                                    <div class="action-buttons mt-4" id="diviPregunta7">
                                        <button type='button' class='btn btn-primary btn-custom-action mr-3 addIncidencias' data-pregunta="7"><i class="fas fa-plus-circle mr-1"></i> Capturar Incidencia</button>
                                        <button type='button' class='btn btn-outline-secondary btn-custom-action viewIncidencias' data-pregunta="7"><i class="fas fa-eye mr-1"></i> Consultar Incidencia</button>
                                    </div>
                                </div>
                            </div>
                            @* Fin de la Pregunta 7 *@


                            @* Entregables *@
                            <div class="tab-pane fade mt-2 ml-3" id="entregables" role="tabpanel" aria-labelledby="contact-tab">
                                <div class="col-lg-12 mt-3">
                                    <h3>Adjuntar Entregables</h3>
                                    <p>
                                        <span style="color: red; font-weight: bold;">Cédula en Proceso o Rechazada:</span> Adjuntar ÚNICAMENTE Factura, Validación del SAT y Reporte(s).<br>
                                        <span style="color: green; font-weight: bold;">Cédula Autorizada:</span> Adjuntar Acta-Entrega, Cédula Firmada y Nota de Crédito.
                                    </p>

                                    <a href="#" type='button' class='btn-sm btn-success mr-2 float-right btn_addFile'><i class="fas fa-plus"></i></a>
                                </div>
                                <div class="row col-lg-12 mt-3">
                                    <table class="table" id="tblEntregables">
                                        <thead>
                                            <tr>
                                                <th>Entregable</th>
                                                <th>Archivo</th>
                                                <th>Fecha de Carga</th>
                                                <th>Acciones</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tEntregables"></tbody>
                                    </table>
                                </div>
                            </div>
                            @* Fin de Entregables *@
                        </div>
                    </div>
                    </div>
            </div>
            <div class="card-footer">
                <div class=" col-lg-12">
                    <button type="button" class="btn btn-primary float-right ml-3 btn_enviar">Enviar a DAS</button>
                    <button type="button" class="btn btn-success float-right btn_guardar">Guardar Cédula</button>
                </div>
            </div>
        }
        else
        {
        <div class="card-body">
            <div class="row ">
                <div class="col-lg-12">
                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <a class="nav-link active" id="home-tab" data-toggle="tab" href="#pregunta_1" role="tab" aria-controls="home" aria-selected="true">Pregunta 1</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="profile-tab" data-toggle="tab" href="#pregunta_2" role="tab" aria-controls="profile" aria-selected="false">Pregunta 2</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="contact-tab" data-toggle="tab" href="#pregunta_3" role="tab" aria-controls="contact" aria-selected="false">Pregunta 3</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="contact-tab" data-toggle="tab" href="#pregunta_4" role="tab" aria-controls="contact" aria-selected="false">Pregunta 4</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="contact-tab" data-toggle="tab" href="#pregunta_5" role="tab" aria-controls="contact" aria-selected="false">Pregunta 5</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="contact-tab" data-toggle="tab" href="#pregunta_6" role="tab" aria-controls="contact" aria-selected="false">Pregunta 6</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="contact-tab" data-toggle="tab" href="#entregables" role="tab" aria-controls="contact" aria-selected="false">Entregables</a>
                        </li>
                    </ul>
                    <div class="tab-content" id="myTabContent">
                        @* Pregunta 1 *@
                        <div class="tab-pane fade mt-2 ml-3 show active" id="pregunta_1" role="tabpanel" aria-labelledby="home-tab">
                            <p class="text-black h5">1. ¿Cúando se estableció el cierre de mes?</p>
                            <div class="form-group">
                                <label for="fechaCierre">Fecha de Cierre</label>
                                <input type="date" name="pregunta1" id="detalle1" class="form-control col-lg-2 pregunta1">
                            </div>
                        </div>
                        @* Fin de la Pregunta 1 *@
                        @* Pregunta 2 *@
                        <div class="tab-pane fade mt-2 ml-3" id="pregunta_2" role="tabpanel" aria-labelledby="profile-tab">
                            <p class="text-black h5">2. ¿El servicio se proporciono de acuerdo a los recorridos y horarios establecidos en las rutas del programa de operación?</p>
                            <div class="icheck-success d-inline">
                                <input type="radio" name="pregunta2" value="true" id="radioSuccess1" class="pregunta2" data-pregunta="2">
                                <label for="radioSuccess1">Si</label>
                            </div>
                            <div class="icheck-success d-inline ml-3">
                                <input type="radio" name="pregunta2" value="false" id="radioSuccess2" class="pregunta2" data-pregunta="2">
                                <label for="radioSuccess2">No</label>
                            </div>
                            <div class="row col-lg-12 mt-3" id="diviPregunta2">
                                <button type='button' class='btn btn-primary mr-2 addIncidencias' data-pregunta="2">Capturar Incidencia</button>
                                <button type='button' class='btn btn-primary viewIncidencias' data-pregunta="2">Consultar Incidencia</button>
                            </div>
                        </div>
                        @* Fin de la Pregunta 2 *@
                        @* Pregunta 3 *@
                        <div class="tab-pane fade mt-2 ml-3" id="pregunta_3" role="tabpanel" aria-labelledby="contact-tab">
                            <p class="text-black h5">3. ¿Se llevó a cabo el registro diario de los servidores públicos que hicieron uso del servicio?</p>
                            <div class="icheck-success d-inline">
                                <input type="radio" name="pregunta3" value="true" id="radioSuccess3" class="pregunta3">
                                <label for="radioSuccess3">Si</label>
                            </div>
                            <div class="icheck-success d-inline ml-3">
                                <input type="radio" name="pregunta3" value="false" id="radioSuccess4" class="pregunta3">
                                <label for="radioSuccess4">No</label>
                            </div>
                            <div class="row col-lg-6 mt-3" id="diviPregunta3">
                                <label for="comentariosP3">Comentarios: </label>
                                <textarea id="detalle3" class="form-control" style="resize:none;"></textarea>
                            </div>
                        </div>
                        @* Fin de la Pregunta 3 *@
                        @* Pregunta 4 *@
                        <div class="tab-pane fade mt-2 ml-3" id="pregunta_4" role="tabpanel" aria-labelledby="contact-tab">
                            <p class="text-black h5">4. La unidad con la que se proporcionó el servicio de transporte cumplió con lo siguiente: tener disponible un botiquín de primeros auxilios, contar con un extintor, mostrar letreros frontales y laterales de la ruta, y comenzar el servicio con la unidad limpia.</p>
                            <div class="icheck-success d-inline">
                                <input type="radio" name="pregunta4" value="true" id="radioSuccess5" class="pregunta4">
                                <label for="radioSuccess5">Si</label>
                            </div>
                            <div class="icheck-success d-inline ml-3">
                                <input type="radio" name="pregunta4" value="false" id="radioSuccess6" class="pregunta4">
                                <label for="radioSuccess6">No</label>
                            </div>
                            <div class="row col-lg-6 mt-3" id="diviPregunta4">
                                <label for="comentariosP3">Comentarios: </label>
                                <textarea id="detalle4" class="form-control" style="resize:none;"></textarea>
                            </div>
                        </div>
                        @* Fin de la Pregunta 4 *@
                        @* Pregunta 5 *@
                        <div class="tab-pane fade mt-2 ml-3" id="pregunta_5" role="tabpanel" aria-labelledby="contact-tab">
                            <p class="text-black h5">
                                5  . ¿El personal de la empresa supervisó la prestación del servicio y cuenta con sistema de comunicación con el fin de garantizar la continuidad del servicio?
                            </p>
                            <div class="icheck-success d-inline">
                                <input type="radio" name="pregunta5" value="true" id="radioSuccess7" class="pregunta5" data-pregunta="5">
                                <label for="radioSuccess7">Si</label>
                            </div>
                            <div class="icheck-success d-inline ml-3">
                                <input type="radio" name="pregunta5" value="false" id="radioSuccess8" class="pregunta5" data-pregunta="5">
                                <label for="radioSuccess8">No</label>
                            </div>
                            <div class="row col-lg-12 mt-3" id="diviPregunta5">
                                <button type='button' class='btn btn-primary mr-2 addIncidencias' data-pregunta="5">Capturar Incidencia</button>
                                <button type='button' class='btn btn-primary viewIncidencias' data-pregunta="5">Consultar Incidencia</button>
                            </div>
                        </div>
                        @* Fin de la Pregunta 5 *@
                        @* Pregunta 6 *@
                        <div class="tab-pane fade mt-2 ml-3" id="pregunta_6" role="tabpanel" aria-labelledby="contact-tab">
                            <p class="text-black h5">6. ¿El personal operador del servicio es cortés, amable y porta uniforme con logotipo de la empresa y su gafete de identificación?</p>
                            <div class="icheck-success d-inline">
                                <input type="radio" name="pregunta6" value="true" id="radioSuccess9" class="pregunta6" data-pregunta="6">
                                <label for="radioSuccess9">Si</label>
                            </div>
                            <div class="icheck-success d-inline ml-3">
                                <input type="radio" name="pregunta6" value="false" id="radioSuccess10" class="pregunta6" data-pregunta="6">
                                <label for="radioSuccess10">No</label>
                            </div>
                            <div class="row col-lg-12 mt-3" id="diviPregunta6">
                                <button type='button' class='btn btn-primary mr-2 addIncidencias' data-pregunta="6">Capturar Incidencia</button>
                                <button type='button' class='btn btn-primary viewIncidencias' data-pregunta="6">Consultar Incidencia</button>
                            </div>
                        </div>
                        @* Fin de la Pregunta 6 *@
                        @* Entregables *@
                        <div class="tab-pane fade mt-2 ml-3" id="entregables" role="tabpanel" aria-labelledby="contact-tab">
                            <div class="col-lg-12 mt-3">
                                <h3>Adjuntar Entregables</h3>
                                <p>
                                    <span style="color: red; font-weight: bold;">Cédula en Proceso o Rechazada:</span> Adjuntar ÚNICAMENTE Factura, Validación del SAT y Reporte(s).<br>
                                    <span style="color: green; font-weight: bold;">Cédula Autorizada:</span> Adjuntar Acta-Entrega, Cédula Firmada y Nota de Crédito.
                                </p>

                                <a href="#" type='button' class='btn-sm btn-success mr-2 float-right btn_addFile'><i class="fas fa-plus"></i></a>
                            </div>
                            <div class="row col-lg-12 mt-3">
                                <table class="table" id="tblEntregables">
                                    <thead>
                                        <tr>
                                            <th>Entregable</th>
                                            <th>Archivo</th>
                                            <th>Fecha de Carga</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody id="tEntregables"></tbody>
                                </table>
                            </div>
                        </div>
                        @* Fin de Entregables *@
                    </div>
                </div>
            </div>
        </div>
        <div class="card-footer">
            <div class=" col-lg-12">
                <button type="button" class="btn btn-primary float-right ml-3 btn_enviar">Enviar a DAS</button>
                <button type="button" class="btn btn-success float-right btn_guardar">Guardar Cédula</button>
            </div>
        </div>
        }
    </div>
</div>

@* Modal para agregar facturas la cedula *@
<div class="modal fade" id="modal-facturas">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header bg-joke">
                <h4 class="modal-title text-white">Agregar/Modificar Factura o Nota de Crédito</h4>
                <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <input class="form-control" id="idFactura" type="hidden" />
                <div class="row col-lg-12 mt-2">
                    <div class="form-group col-lg-4" id="divTipoFactura">
                        <label for="forFactura">El "XML" corresponde a:</label>
                        <select id="tipoFactura" class="form-control">
                            <option value="">Seleccione una opción</option>
                            <option value="Factura">Factura</option>
                            <option value="NC">Nota de Crédito</option>
                        </select>
                        <div class="col-sm-12 error_tipoFactura">
                            <small id="dateHelp" class="text-danger">
                                Por favor seleccione el tipo de archivo a subir
                            </small>
                        </div>
                    </div>
                    <div class="form-group col-lg-6">
                        <label for="elegirArchivo">Seleccionar Archivo XML: </label>
                        <div class="custom-file">
                            <input type="file" class="custom-file-input file_factura" id="fileFactura" accept=".xml">
                            <label class="custom-file-label" for="customFile">Subir archivo "XML"</label>
                        </div>
                        <div class="col-sm-12 error_customFile">
                            <small id="dateHelp" class="text-danger">
                                Por favor seleccione el archivo correspondiente
                            </small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer justify-content-end">
                <button type="button" class="btn btn-primary" id="agregarFactura">Guardar</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
@* FIN del Modal para agregar facturas la cedula *@

@* Modal para ver las facturas de la cedula *@
<div class="modal fade" id="modal-ver-facturas">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header bg-joke">
                <h4 class="modal-title text-white">Ver/Agregar Factura(s) o Nota(s) de Crédito</h4>
                <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <button class='btn btn-sm btn-primary mr-2 mb-3' data-toggle="tooltip" title="Agregar Factura o Nota de Crédito" data-placement="top" id="add_facturas">
                    <i class="fal fa-plus text-white"></i> Agregar
                </button>
                <div class=" row col-lg-12">
                    <p>
                        <strong style="color: dodgerblue;">NOTA: </strong>Favor de revisar que los <strong style="color: dodgerblue;"> datos de la cédula </strong> resaltados en color <strong style="color: dodgerblue;">Azul </strong> coincidan con
                        la información de la factura que fue agregada.
                    </p>
                </div>
                <div class="tblFacturas scrollbar-deep-purple">
                    <div class="bodyFacturas">
                        <div class="mt-3">
                            <table class="table" id="listado_facturas">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>Empresa</th>
                                        <th>Folio Fiscal</th>
                                        <th>Número Factura</th>
                                        <th>Subtotal Factura</th>
                                        <th>Total</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="listaFacturas"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- /.modal-content -->
</div>
<!-- /.modal-dialog -->
@* FIN del Modal para ver las facturas de la cedula *@

@* Modal para ver los conceptos de las facturas de la cedula *@
<div class="modal fade" id="modal-ver-conceptos">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header bg-joke">
                <h4 class="modal-title text-white" id="factura_serie"></h4>
                <button type="button" class="close close_conceptos text-white" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class=" row col-lg-12" id="detalle_conceptos"></div>
            </div>
        </div>
    </div>
    <!-- /.modal-content -->
</div>
<!-- /.modal-dialog -->
@* Fin de Modal para ver los conceptos de las facturas de la cedula *@

@* Modal para la captura de Incidencias *@
<!--<div class="modal fade" id="modal-incidencias">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header bg-joke">
                <h4 class="modal-title text-white">Registrar Incidencia</h4>
                <button type="button" class="close close-incidencias text-white" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="id_incidencia" />
                <input type="hidden" id="pregunta" />
                <div class="row">
                    <div class="form-group col-md-3" id="divCategoria">
                        <label for="fechaSolicitud">Categoria: </label>
                        <select id="categoria" class="form-control">
                            <option value="">Seleccione una opción</option>
                            <option value="Obligaciones Generales">Obligaciones Generales</option>
                            <option value="Entrega de Documentos">Entrega de Documentos</option>
                            <option value="Infraestructura">Infraestructura</option>
                            <option value="Capacitación del Operador">Capacitación del Operador</option>
                            <option value="Obligaciones de los operadores">Obligaciones de los operadores</option>
                            <option value="Horarios y Rutas">Horarios y Rutas</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-md-3" id="divFechaIncidencia">
                        <label for="fechaIncidencia">Fecha Incidencia: </label>
                        <input type="date" id="fechaIncidencia" class="form-control">
                        <div class="col-sm-12" id="error_fechaIncidencia">
                            <small id="dateHelp" class="text-danger">
                                Por favor capture la Fecha de la Incidencia
                            </small>
                        </div>
                    </div>
                    <div class="form-group col-md-3" id="divHoraIncidencia">
                        <label for="HoraIncidencia">HoraIncidencia: </label>
                        <input type="time" id="horaIncidencia" class="form-control">
                        <div class="col-sm-12" id="error_horaIncidencia">
                            <small id="dateHelp" class="text-danger">
                                Por favor capture la Hora de la Incidencia
                            </small>
                        </div>
                    </div>
                </div>
                <div class="row col-lg-12">
                    <div class="form-group col-lg-12" id="divInciComentarios">
                        <label for="fechaSolicitud">Comentarios: </label>
                        <textarea id="inciComentarios" class="form-control" style="resize:none;"></textarea>
                        <div class="col-sm-12" id="error_inciComentarios">
                            <small id="dateHelp" class="text-danger">
                                Por favor capture la Comentarios
                            </small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer justify-content-end">
                <button type="button" class="btn btn-primary" id="guardaIncidencia">Guardar Incidencia</button>
            </div>
        </div>-->
        <!-- /.modal-content -->
    <!--</div>-->
    <!-- /.modal-dialog -->
<!--</div>-->
<div class="modal fade" id="modal-incidencias">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header bg-joke">
                <h4 class="modal-title text-white">Registrar Incidencia</h4>
                <button type="button" class="close close-incidencias text-white" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="id_incidencia" />
                <input type="hidden" id="pregunta" /> <div class="row">
                    <div class="form-group col-md-3" id="divCategoria">
                        <label for="categoria">Categoria: </label>
                        <select id="categoria" class="form-control">
                            <option value="">Seleccione una opción</option>
                            <option value="Obligaciones Generales">Obligaciones Generales</option>
                            <option value="Entrega de Documentos">Entrega de Documentos</option>
                            <option value="Infraestructura">Infraestructura</option>
                            <option value="Capacitación del Operador">Capacitación del Operador</option>
                            <option value="Obligaciones de los operadores">Obligaciones de los operadores</option>
                            <option value="Horarios y Rutas">Horarios y Rutas</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-md-3" id="divFechaIncidencia">
                        <label for="fechaIncidencia">Fecha Incidencia: </label>
                        <input type="date" id="fechaIncidencia" class="form-control">
                        <div class="col-sm-12" id="error_fechaIncidencia">
                            <small id="dateHelp" class="text-danger">
                                Por favor capture la Fecha de la Incidencia
                            </small>
                        </div>
                    </div>
                    <div class="form-group col-md-3" id="divHoraIncidencia">
                        <label for="horaIncidencia">HoraIncidencia: </label>
                        <input type="time" id="horaIncidencia" class="form-control">
                        <div class="col-sm-12" id="error_horaIncidencia">
                            <small id="dateHelp" class="text-danger">
                                Por favor capture la Hora de la Incidencia
                            </small>
                        </div>
                    </div>
                </div>

                <div id="checklistContainer" style="display: none;">
                    <div class="card mb-4 shadow-sm">          
                        <div class="card-body">
                            <h6 class="card-subtitle mb-4 fs-6">
                                Incumplimiento de Obligaciones del Operador:
                            </h6>

                            <div class="form-group" id="checklistTipoIncidencia">
                                <div class="row mb-2">
                                    <div class="col-md-3 col-sm-6 mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input incidencia-option" type="checkbox" value="Conducta" id="incidenciaConducta">
                                            <label class="form-check-label" for="incidenciaConducta">
                                                <i class="fas fa-user-tie me-1 text-info"></i> Conducta
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-3 col-sm-6 mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input incidencia-option" type="checkbox" value="Seguridad" id="incidenciaSeguridad">
                                            <label class="form-check-label" for="incidenciaSeguridad">
                                                <i class="fas fa-shield-alt me-1 text-success"></i> Seguridad
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-3 col-sm-6 mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input incidencia-option" type="checkbox" value="UsoServicio" id="incidenciaUsoServicio">
                                            <label class="form-check-label" for="incidenciaUsoServicio">
                                                <i class="fas fa-route me-1 text-warning"></i> Uso del servicio
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-3 col-sm-6 mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input incidencia-option" type="checkbox" value="Uniforme" id="incidenciaUniforme">
                                            <label class="form-check-label" for="incidenciaUniforme">
                                                <i class="fas fa-tshirt me-1 text-danger"></i> Uniforme
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <div class="row mb-2">
                                    <div class="col-md-3 col-sm-6 mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input incidencia-option" type="checkbox" value="Gafete" id="incidenciaGafete">
                                            <label class="form-check-label" for="incidenciaGafete">
                                                <i class="fas fa-id-card me-1 text-primary"></i> Gafete
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-3 col-sm-6 mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input incidencia-option" type="checkbox" value="ReglamentoTransito" id="incidenciaReglamentoTransito">
                                            <label class="form-check-label" for="incidenciaReglamentoTransito">
                                                <i class="fas fa-traffic-light me-1 text-secondary"></i> Reglamento de tránsito
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-3 col-sm-6 mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input incidencia-option" type="checkbox" value="ConocimientoRuta" id="incidenciaConocimientoRuta">
                                            <label class="form-check-label" for="incidenciaConocimientoRuta">
                                                <i class="fas fa-map-marked-alt me-1 text-info"></i> Conocimiento de la ruta
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-3 col-sm-6 mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input incidencia-option" type="checkbox" value="LicenciaVigente" id="incidenciaLicenciaVigente">
                                            <label class="form-check-label" for="incidenciaLicenciaVigente">
                                                <i class="fas fa-id-badge me-1 text-warning"></i> Licencia vigente de conducir
                                            </label>
                                        </div>
                                    </div>
                                    <div>
                                        <i class="fas fa-comment-alt-edit me-1 text-muted"></i> Por favor, especifica los detalles de la incidencia en los comentarios.
                                    </div>
                                </div>                        
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row col-lg-12">
                    <div class="form-group col-lg-12" id="divInciComentarios">
                        <label for="inciComentarios">Comentarios: </label>
                        <textarea id="inciComentarios" class="form-control" style="resize:none;"></textarea>
                        <div class="col-sm-12" id="error_inciComentarios">
                            <small id="dateHelp" class="text-danger">
                                Por favor capture la Comentarios
                            </small>
                        </div>
                    </div>
                </div>

            </div>
            <div class="modal-footer justify-content-end">
                <button type="button" class="btn btn-primary" id="guardaIncidencia">Guardar Incidencia</button>
            </div>
        </div>
    </div>
</div>
@*Fin Modal para la captura de Incidencias *@

@* Modal para mostrar las Incidencias *@
<div class="modal fade" id="modal-consultaIncidencias" tabindex="-1" role="dialog" aria-labelledby="modalTitle" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
        <div class="modal-content shadow-lg border-0 rounded-lg">
            <div class="modal-header text-white p-4 rounded-top-lg" style="background-color: #24135f;">
                <h4 class="modal-title text-center w-100 font-weight-bold" id="modalTitle">
                    <i class="fas fa-search-plus mr-2"></i> Detalles de Incidencias del Programa de Operación
                </h4>
                <button type="button" class="close text-white opacity-75" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body p-4">
                <div class="alert text-center py-2 mb-4" role="alert">
                    <i class="fas fa-info-circle mr-2"></i> Consulta y gestiona las incidencias registradas.
                </div>
                <div class="row">
                    <div class="col-lg-12">
                        <div class="table-responsive">
                            <table class="table table-hover table-striped table-bordered text-center" id="incidenciasDataTable">
                                <thead class="bg-light text-secondary">
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Tipo</th>
                                        <th scope="col">Fecha de Incidencia</th>
                                        <th scope="col">Comentarios</th>
                                        <th scope="col">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="tbl_incidencias">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer justify-content-end p-3">
                <button type="button" class="btn btn-secondary px-4" data-dismiss="modal">
                    <i class="fas fa-times-circle mr-2"></i>Cerrar
                </button>
            </div>
        </div>
    </div>
</div>
@*Fin Modal para mostrar las Incidencias *@

@* Modal para la captura de Adjuntos *@
<div class="modal fade" id="modal_evidencias">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header bg-joke">
                <h4 class="modal-title text-white">Adjuntar Entregables</h4>
                <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <input type="hidden" id="file_id" />
                    <div class="form-group col-lg-4">
                        <label for="tipoIncidencia">Tipo de Entregable:</label>
                        <select class="form-control" id="tipo_entregable">
                            <option value="">Seleccione un Entregable</option>
                            <option value="ActaER">Acta Entrega - Recepción</option>
                            <option value="Factura">Factura</option>
                            <option value="SAT">Validación del SAT</option>
                            <option value="NotaCredito">Nota de Crédito</option>                       
                        </select>
                        <div class="col-sm-12" id="error_tipoEntre">
                            <small id="dateHelp" class="text-danger">
                                Por favor seleccione el tipo de entregable
                            </small>
                        </div>
                    </div>
                    <div class="form-group col-lg-6">
                        <label for="elegirArchivo">Seleccionar Archivo: </label>
                        <div class="custom-file">
                            <input type="file" class="custom-file-input" id="customFile" accept=".pdf">
                            <label class="custom-file-label" for="customFile">Seleccionar Archivo</label>
                        </div>
                        <div class="col-sm-12" id="error_customFile">
                            <small id="dateHelp" class="text-danger">
                                Por favor seleccione el archivo correspondiente
                            </small>
                        </div>
                    </div>
                    <div class="form-row col-lg-12 mt-2" id="comentariosEntregable">
                        <div class="form-group mt-2 col-md-12">
                            <label for="fechaCierre">Comentarios:</label><br>
                            <textarea id="comentarios_entregable" class="form-control float-left"></textarea>
                            <div class="col-sm-12" id="error_comentariosEntre">
                                <small id="comentariosHelp" class="text-danger">
                                    Por favor capture los comentarios correspondientes
                                </small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer justify-content-end">
                <button type="button" class="btn btn-primary" id="adjuntarArchivo">Adjuntar Entregable</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
@*Fin Modal para la captura de Incidencias *@

@* Modal para la ver Adjuntos *@
<div class="modal fade" id="show_pdf">
    <div class="modal-dialog modal-xl-view">
        <div class="modal-content">
            <div class="modal-header bg-joke">
                <h4 class="modal-title text-white" id="titlePDF"></h4>
                <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body-view">
                <table class="table">
                    <tr>
                        <td><strong>Folio: </strong> @Model.Folio</td>
                        <td><strong>Año: </strong>@Model.Anio</td>
                        <td><strong>Mes: </strong>@Model.Mes</td>
                        <td><strong>Inmueble: </strong>@Model.inmuebles.Nombre</td>
                        <td><strong>Estatus: </strong>@Model.Estatus </td>
                    </tr>
                </table>
                <div class="row" id="objectPdf">
                </div>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
@*Fin Modal para ver Adjuntos*@
<style>
    .radio-group {
        display: flex;
        align-items: center;
        flex-wrap: wrap;
        gap: 20px; /* Espacio entre las opciones "Si", "No", "No Aplica" */
        margin-bottom: 1rem;
    }

    /* Targeting the hidden input, though iCheck typically handles this */
    .icheck-success input[type="radio"] {
        /* iCheck usually sets opacity: 0; position: absolute; for the native input */
        /* If you're custom styling, you'd hide it here */
        /* For iCheck, leave this alone */
    }

    /* Targeting the visual element rendered by iCheck for the radio button */
    .icheck-success label::before {
        /* The ::before pseudo-element is commonly used by iCheck for the outer circle */
        content: '';
        display: inline-block;
        width: 20px; /* Tamaño del radio */
        height: 20px; /* Tamaño del radio */
        border: 2px solid #ccc; /* Borde del círculo inactivo */
        border-radius: 50%; /* Hace un círculo perfecto */
        background-color: #f8f8f8; /* Fondo ligero para el círculo inactivo */
        margin-right: 8px; /* Espacio entre el círculo y la etiqueta */
        vertical-align: middle; /* Alineación con el texto */
        transition: all 0.2s ease-in-out; /* Transición suave para los cambios de estado */
        box-sizing: border-box; /* Incluye padding y border en el tamaño total */
    }

    .icheck-success input[type="radio"]:checked + label::before {
        /* Cuando el radio está seleccionado (outer circle) */
        background-color: #24135f; /* ¡Tu morado principal para el fondo del círculo! */
        border-color: #24135f; /* Borde del mismo color */
    }

    .icheck-success label::after {
        /* The ::after pseudo-element is commonly used by iCheck for the inner dot */
        content: '';
        display: block;
        width: 10px; /* Tamaño del punto interno */
        height: 10px; /* Tamaño del punto interno */
        background-color: #ffffff; /* Punto interno blanco */
        border-radius: 50%; /* Hace un círculo perfecto */
        position: absolute;
        top: 50%; /* Centrar verticalmente */
        left: 50%; /* Centrar horizontalmente */
        transform: translate(-50%, -50%) scale(0); /* Inicialmente oculto */
        transition: transform 0.2s ease-in-out; /* Transición para la aparición/desaparición */
    }

    .icheck-success input[type="radio"]:checked + label::after {
        /* Cuando el radio está seleccionado (inner dot) */
        transform: translate(-50%, -50%) scale(1); /* Hace visible el punto */
    }

    /* Estilo para las etiquetas de los radio buttons (Sí/No/No Aplica) */
    .icheck-success label {
        font-family: 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
        font-size: 1.3rem;
        color: #444;
        font-weight: 500;
        cursor: pointer;
        position: relative; /* Necesario para posicionar el ::after */
        padding-left: 28px; /* Espacio para que el radio no se superponga con el texto */
        display: inline-block; /* Asegura que ocupe solo el ancho necesario */
        line-height: 20px; /* Alinea la altura del texto con el radio */
    }

        /* Efecto hover en el label para el círculo exterior */
        .icheck-success label:hover::before {
            border-color: #6a5acd; /* Morado más claro al pasar el ratón */
            box-shadow: 0 0 0 3px rgba(106, 90, 205, 0.15); /* Sombra suave al pasar el ratón */
        }

    /* Asegurarse de que el input esté oculto pero accesible para lectores de pantalla */
    .icheck-success input[type="radio"] {
        position: absolute;
        opacity: 0;
        width: 1px;
        height: 1px;
        overflow: hidden;
        clip: rect(0 0 0 0);
    }

    .question-text {
        font-family: 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
        font-size: 1.18rem; /* Ligeramente más grande para mayor impacto */
        color: #1a1a1a; /* Tu color morado principal */
        font-weight: 700; /* ¡Más negrita! Esto hará que todo el texto de la pregunta destaque. */
        line-height: 1.6;
        margin-bottom: 1.5rem;
        /* Si quieres un subrayado sutil o un borde, podrías añadir: */
        /* border-bottom: 1px dashed #e0e0e0; */
        /* padding-bottom: 0.5rem; */
    }
        /* Estilo para los títulos (por ejemplo, "Folio:", "Año:", etc.) */
        .table-info-summary strong {
            color: #24135f;      /* Tu color morado principal */
            font-weight: 800;   /* ¡CAMBIO: Hacemos el texto más negrita! Puedes probar 900 si quieres aún más. */
            font-size: 1.05rem; /* ¡CAMBIO: Aumentamos el tamaño de la fuente para los títulos! */
            margin-right: 10px;  /* Un poco más de espacio entre el título y el valor */
        }

        .summary-value {
            font-weight: 500;
            color: #1a1a1a;
        }

        /* Estilo para los valores que quieres resaltar más (Facturas, Monto) */
        .summary-value-highlight {
            font-weight: 700;
            color: #24135f;
            font-size: 1.05rem;
        }

        /* Estilos para los íconos */
        .table-info-summary i {
            margin-right: 10px;
            font-size: 1.1rem;
            width: 20px;
            text-align: center;
        }

        .table-info-summary .icon-primary {
            color: #6a5acd;
            opacity: 0.8;
        }

        .table-info-summary .icon-secondary {
            color: #24135f;
            font-size: 1.2rem;
        }

        /* Estilo para las celdas de la segunda fila (Estatus, Facturas y Monto) */
        .table-info-summary tr:nth-child(2) td {
            background-color: #f7f7f7;
            border-top: 1px dashed #e0e0e0;
            padding-top: 1.2rem;
        }
    .nav-tabs {
        display: flex;
        flex-wrap: wrap; /* Permite que las pestañas se envuelvan si hay muchas en una fila */
        border-bottom: 2px solid #ddd; /* Aumentamos el grosor de la línea base para que se vea más sólida */
        margin-bottom: 0; /* Asegura que no haya margen extra debajo de cada fila de pestañas */
    }

    /* Estilo base para CADA ENLACE de pestaña (el <a>, ahora con la clase .nav-link) */
    .nav-link2 { /* ¡CAMBIO: Selector de .nav-link1 a .nav-link! */
        font-size: 0.95rem; /* Ligeramente más grande para mejor legibilidad */
        padding: 0.8rem 1.3rem; /* Aumentamos un poco el padding para que las pestañas sean más cómodas */
        color: #555; /* Un gris más suave para el texto inactivo */
        background-color: #f0f0f0; /* Un gris muy claro para el fondo de las inactivas */
        border: 1px solid #ddd; /* Un borde gris claro para todas las pestañas */
        border-bottom: none; /* Crucial: Elimina el borde inferior individual para que se una a la línea del .nav-tabs */
        border-radius: 0.4rem 0.4rem 0 0; /* Bordes superiores un poco más redondeados */
        transition: all 0.3s ease-in-out; /* Transición suave para todos los cambios de estado */
        margin-right: 0.35rem; /* Un poco más de espacio entre pestañas */
        margin-bottom: 0.25rem; /* Mantiene el espacio entre filas cuando se envuelven */
        text-align: center;
        flex-shrink: 0;
        white-space: nowrap;
        min-width: fit-content;
    }

        /* Efecto al pasar el ratón (hover) sobre pestañas inactivas */
        .nav-link2:hover:not(.active) { /* ¡CAMBIO: Selector de .nav-link1 a .nav-link! */
            color: #24135f; /* Texto morado principal */
            background-color: #e6e6fa; /* Un lila muy suave para el fondo del hover */
            border-color: #a0a0d0; /* Un borde un poco más oscuro para el hover */
            cursor: pointer;
        }

        /* Estilo para la pestaña ACTIVA */
        .nav-link2.active { /* ¡CAMBIO: Selector de .nav-link1 a .nav-link! */
            color: #24135f; /* Texto de la pestaña activa en tu color morado principal */
            background-color: #ffffff; /* Fondo blanco para la pestaña activa */
            border-color: #24135f; /* Borde superior, izquierdo y derecho en morado principal */
            font-weight: 600; /* Texto en negrita para resaltar */
            font-size: 1rem; /* Ligeramente más grande para darle peso visual */
            padding-top: 0.9rem; /* Un poco más de padding para "levantarla" visualmente */
            position: relative;
            z-index: 2; /* Asegura que se muestre por encima de la línea base */
            /* ----- CLAVE para el efecto de remarcado sutil ----- */
            border-bottom: 2px solid #ffffff; /* Este borde inferior "corta" la línea base y debe ser del mismo color que el fondo del .tab-content */
        }
    .form-check-input.incidencia-option {
        width: 1.25em; /* O un valor en píxeles, por ejemplo, 24px */
        height: 1.25em; /* Debe ser igual al ancho para mantener el cuadrado */
        /* Ajusta el margen superior para que se alinee con el texto si es necesario */
    }

    /* Opcional: Ajustar el label si el texto parece desalineado */
    .form-check-label {
        padding-left: 0.5em; /* Añade un pequeño espacio entre el checkbox y el texto/icono */
    }
    }
</style>
@section Scripts{
    <script>
        $(function () {
            var totalPreguntas = '@Model.RespuestasEncuesta.Count';
            var respuestas = @Html.Raw(Json.Serialize(@Model.RespuestasEncuesta));
            var model = @Html.Raw(Json.Serialize(@Model));


            var meses = ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"];
            /*Llenamos el Combo de Meses de Correspondencia*/
                let optionsMes = "<option value=''>Selecciona el Mes</option>";
                meses.forEach(function (mes) {
                    optionsMes += "<option value=" + mes + ">" + mes + "</option>"
                });
                $("#mes_correspondiente").html(optionsMes);
            /*Fin del Combo de inmuebles*/

            $('[data-toggle="tooltip"]').tooltip();
            $('.error_tipoFactura').css('display', 'none');

            /*Detalles de Incidencias*/
                $('#diviPregunta2').css('display', 'none');
                $('#diviPregunta3').css('display', 'none');
                $('#diviPregunta4').css('display', 'none');
                $('#diviPregunta5').css('display', 'none');
                $('#diviPregunta6').css('display', 'none');
                $('#diviPregunta7').css('display', 'none');
            /*Detalles de Incidencias*/

            /*Errores*/
                /*Adjuntar Archivos*/
                    $('#error_tipoEntre').css('display', 'none');
                    $('#error_customFile').css('display', 'none');
                    $('#error_comentariosEntre').css('display', 'none');
                    $('.error_customFile').css('display', 'none');
                /*Fin de Errores*/

            /*Componentes de Incidencias*/
                $('#divCategoria').css('display', 'none');
                $('#divFechaIncidencia').css('display', 'none');
                $('#divHoraIncidencia').css('display', 'none');
                $('#divInciComentarios').css('display', 'none');
                $('#checklistContainer').css('display', 'none');
                $('#error_fechaIncidencia').css('display', 'none');
                $('#error_horaIncidencia').css('display', 'none');
                $('#error_inciComentarios').css('display', 'none');
            /*Fin Componentes de Incidencias*/


            /********************************** Agregar/Cambiar Facturas *************************************/
                /*Proceso para editar la cedula*/
                    $(document).on('click','.update_factura',function () {
                        var id = $(this).data('id');

                        $("#idFactura").val(id);

                        $('#modal-ver-facturas').modal('hide');
                        $("#modal-facturas").modal('show');

                    });

                    $(document).on('click','.view_factura',function () {
                        var id = $(this).data('id');
                        var divTbl = "";
                        $('#modal-ver-facturas').modal('hide');
                        axios.get('/limpieza/getFacturas/' + model.id + '/' + 10).then(table => {
                            $("#factura_serie").text("Detalle de la Factura: " + table.data[id].comprobante.serie + table.data[id].comprobante.folio);
                            var conceptos = table.data[id].concepto;

                            for (var i = 0; i < conceptos.length; i++) {
                                divTbl += '<div class="row col-lg-12 mt-1">' +
                                    '<table class="table table-borderless">' +
                                    '<tr>' +
                                        '<td colspan="4"><strong>Concepto: </strong>' + conceptos[i].descripcion + '</td>'+
                                    '</tr>'+
                                    '<tr>' +
                                    '    <td data-toggle="tooltip" title="Número de elementos que prestaron el servicio en el mes" data-placement="top" id="concepto_cantidad"><strong>Cantidad: </strong>' + table.data[id].concepto[i].cantidad + '</td>' +
                                    '    <td data-toggle="tooltip" title="Clave del Producto o Servicio Facturado" data-placement="top" id="concepto_cveProduc"><strong>Clave del Producto: </strong>' + table.data[id].concepto[i].claveProdServ + '</td>' +
                                    '    <td data-toggle="tooltip" title="Clave de la Medida en Base al Servicio" data-placement="top" id="concepto_medida"><strong>Clave de Medida: </strong>' + table.data[id].concepto[i].claveUnidad + '</td>' +
                                    '    <td data-toggle="tooltip" title="Unidad de Medida" data-placement="top" id="concepto_unidadMed"><strong>Unidad de Medida: </strong>' + table.data[id].concepto[i].unidad + '</td>' +
                                    '    <td data-toggle="tooltip" title="Tipo de CFDI" data-placement="top" id="tipo_cfdi"><strong>Uso de CFDI: </strong>' + table.data[id].receptor.usoCFDI + '</td>' +
                                    '    <td data-toggle="tooltip" title="Valor unitario por unidad" data-placement="top" id="concepto_unitario"><strong>Precio Unitario: </strong> $ ' + (table.data[id].concepto[i].valorUnitario).toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,') + '</td>' +
                                    '</tr>' +
                                    '<tr>' +
                                    '    <td data-toggle="tooltip" title="IVA del subtotal del 16%" data-placement="top" id="concepto_iva"><strong>IVA: </strong> $ ' + (table.data[id].traslado.importe).toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,') + '</td>' +
                                    '    <td data-toggle="tooltip" title="Importe total de la facturación" data-placement="top" id="concepto_total"><strong>Total: </strong> $ ' + (table.data[id].concepto[i].importe).toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,') + '</td>' +
                                    '    <td colspan="3"></td>' +
                                    '</tr>' +
                                    '</table>' +
                                    '</div>';
                            }
                            $("#detalle_conceptos").html(divTbl);
                            $('#modal-ver-conceptos').modal('show');
                        });
                   });

                    $(document).on('click', '.delete_factura', function () {
                        var id = $(this).data('id');
                        var serie = $(this).data('serie');
                        var descripcion = $(this).data('descr');
                        var folio = serie + $(this).data('folio')+"";

                        Swal.fire({
                            'icon': 'warning',
                            'title': 'Servicio de Transporte de Personal',
                            'html': '<strong>Advertencia:</strong><p>¿Desea eliminar la factura con Folio <strong>' + folio + '</strong> correspondiente al <strong>' +
                                descripcion +'</strong>?</p>',
                            'confirmButtonColor': '#3085d6',
                            'cancelButtonColor': '#d33',
                            'confirmButtonText': 'Si, eliminar',
                            'cancelButtonText': 'Cancelar',
                            'showCancelButton': true
                        }).then(yes => {
                            if (yes.isConfirmed) {
                                Swal.fire({
                                    'icon': 'warning',
                                    'title': 'Servicio de Transporte de Personal',
                                    'text': 'Escriba la palabra ELIMINAR en mayúsculas para confirmar el borrado de la factura con folio: '+folio,
                                    'confirmButtonColor': '#3085d6',
                                    'cancelButtonColor': '#d33',
                                    'confirmButtonText': 'Si, eliminar',
                                    'cancelButtonText': 'Cancelar',
                                    'showCancelButton': true,
                                    'input': 'text',
                                    'inputPlaceholder': 'Escribe la palabra ELIMINAR'
                                }).then(del => {
                                    if (del.value == 'ELIMINAR') {
                                        axios.delete('/limpieza/deleteFactura/'+id).then(del => {
                                            Swal.fire({
                                                'icon': 'success',
                                                'title': 'Servicio de Transporte de Personal',
                                                'text': 'La factura fue eliminada correctamente.',
                                            }).then(function () {
                                                window.location.reload();
                                            });
                                        })
                                    }
                                });
                            }
                        });
                    });

                    $(".file_factura").change(function (e) {
                        var archivo = e.target.files[0];
                        var fileName = $(this).val().split("\\").pop();
                        var ext = fileName.split('.').pop();
                        if (ext == "xml" || ext == "XML") {
                            $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
                            if ($('.file_factura').hasClass('is-invalid')) {
                                $('.file_factura').removeClass('is-invalid');
                                $('.file_factura').addClass('is-valid');
                                $('.error_customFile').css('display', 'none')
                            } else {
                                $('.file_factura').addClass('is-valid');
                            }
                        } else {
                            Swal.fire({
                                'icon': 'error',
                                'title': 'Servicio de Transporte de Personal',
                                'text': 'El archivo que intentas adjuntar no es válido. Favor de solo seleccionar archivos "Xml"'
                            });

                            $(".custom-file-label").text("Seleccionar Archivo");
                            document.getElementById('customFile').value = '';

                            if ($('.file_factura').hasClass('is-valid')) {
                                $('.file_factura').removeClass('is-valid');
                                $('.file_factura').addClass('is-invalid');
                            }
                            $('.file_factura').addClass('is-invalid');
                            $('.error_customFile').css('display', 'block');
                        }
                    });

                    function validaCamposArchivoXml() {
                        if ($('#tipoFactura').val() == "" && $("#idFactura").val() == "") {
                            $('#tipoFactura').addClass('is-invalid');
                            $('.error_tipoFactura').css('display', 'block');

                            return false;
                        }
                        if ($('.file_factura').val() == "") {
                            $('.file_factura').addClass('is-invalid');
                            $('.error_customFile').css('display', 'block');

                            return false;
                        }
                        return true;
                    }

                    $('#agregarFactura').click(function () {
                        var id = $("#idFactura").val();
                        var tipo = $("#tipoFactura").val();

                         var formData = new FormData();
                         var file = document.getElementById('fileFactura').files[0];

                         if (id.length > 0) {
                             id = parseInt(id);
                         } else {
                             id = 0;
                         }

                         formData.append("Id", id);
                        formData.append("ServicioId", 10);
                        formData.append("Tipo", tipo);
                         formData.append("CedulaId", model.id);
                         formData.append("Xml", file);
                         if (validaCamposArchivoXml() == true) {
                             if (id == "") {
                                 axios.post('/facturas/insertaFactura', formData).then(fact => {
                                     if (fact.data == 1) {
                                         Swal.fire({
                                             'icon': "success",
                                             'title': 'Servicio de Transporte de Personal',
                                             'html': 'La factura fue agregada correctamente.'
                                         }).then(function () {
                                             window.location.reload();
                                         });
                                     } else if (fact.data != 1 && fact.data != -1) {
                                         Swal.fire({
                                             'icon': "error",
                                             'title': 'Servicio de Transporte de Personal',
                                             'html': '<p style="text-align: justify">La factura que intenta adjuntar ya fue agregada previamente en la cédula con los siguientes datos: <br />' +
                                                 '<li> <b>Folio: </b>' + fact.data.folio + '</li>' +
                                                 '<li> <b>Inmueble: </b>' + fact.data.inmuebles.nombre + '</li></p>'
                                         });
                                     }
                                 }).catch(error => {
                                     Swal.fire({
                                         'icon': "error",
                                         'title': 'Servicio de Transporte de Personal',
                                         'html': '<p style="text-align: justitfy;">CASESG no puede adjuntar la factura, Contacte al administrador del Sistema.'
                                     });
                                 });
                             } else {
                                 axios.post('/facturas/updateFactura', formData).then(fact => {
                                     if (fact.data == 1) {
                                         Swal.fire({
                                             'icon': "success",
                                             'title': 'Servicio de Transporte de Personal',
                                             'html': 'La factura fue actualizada correctamente.'
                                         }).then(function () {
                                             window.location.reload();
                                         });
                                     } else if (fact.data != 1 && fact.data != -1) {
                                         Swal.fire({
                                             'icon': "error",
                                             'title': 'Servicio de Transporte de Personal',
                                             'html': '<p style="text-align: justify">La factura que intenta adjuntar ya fue agregada previamente en la cédula con los siguientes datos: <br />' +
                                                 '<li> <b>Folio: </b>' + fact.data.folio + '</li>' +
                                                 '<li> <b>Inmueble: </b>' + fact.data.inmuebles.nombre + '</li></p>'
                                         });
                                     }
                                 }).catch(error => {
                                     Swal.fire({
                                         'icon': "error",
                                         'title': 'Servicio de Transporte de Personal',
                                         'html': '<p style="text-align: justitfy;">CASESG no puede adjuntar la factura, Contacte al administrador del Sistema.'
                                     });
                                 });
                             }
                        }
                        document.getElementById('customFile').value = '';
                        $('#idFactura').val("");
                        $(".custom-file .custom-file-label").text("Subir archivo \"XML\"");
                        $('.file_factura').removeClass('is-valid');
                        $("#tipoFactura").val('');
                    });
                /*FIN del proceso para editar la cedula*/

                /*Ver Facturas*/
                $("#btn_facturas").click(function () {
                    axios.get('/limpieza/getFacturas/' + model.id + '/' + 10).then(table => {
                        var facturas = table.data;
                        for (var i = 0; i < facturas.length; i++) {
                            table += "<tr>" +
                                "<td>" + (i + 1) + "</td>" +
                                "<td>" + facturas[i].emisor.nombre + "</td>" +
                                "<td>" + facturas[i].timbreFiscal.uuid + "</td>" +
                                "<td>" + (facturas[i].comprobante.serie + "" + facturas[i].comprobante.folio) + "</td>" +
                                "<td> $" + parseFloat(facturas[i].comprobante.subTotal).toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,') + "</td>" +
                                "<td> $" + parseFloat(facturas[i].comprobante.total).toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,') + "</td>" +
                                "<td>" +
                                "<a class='view_factura' href='#' data-id='" + i + "'><i class='far fa-list text-success'></i></a>" +
                                "<a class='update_factura' href='#' data-id='" + facturas[i].id + "'><i class='fad fa-pencil text-primary ml-2'></i></a>" +
                                "</td>" +
                                "</tr>";
                        }
                        $("#listaFacturas").html(table);
                        if (facturas.length == 0) {
                            $("#listado_facturas").hide();
                        } else {
                            $("#listado_facturas").show();
                        }
                    });
                    $('#modal-ver-facturas').modal('show');
                });
                /*Fin de Ver Facturas*/

                /*Agregar Facturas*/
                    $('#add_facturas').click(function () {
                        $("#idFactura").val('');
                        $('#modal-ver-facturas').modal('hide');
                        $('#modal-facturas').modal('show');
                    });
                /*Fin Agregar Facturas*/


            /******************************* FIN Agregar/Cambiar Facturas **********************************/
            /******************************* Editar Cuestionario ******************************************/
                var tipoPregunta = null;
                for (var i = 0; i < respuestas.length; i++) {
                    tipoPregunta = $('.pregunta' + respuestas[i].pregunta).attr("type");
                    if (tipoPregunta == "radio") {
                        $('input:radio[name="pregunta' + respuestas[i].pregunta + '"][value="' + respuestas[i].respuesta + '"]').prop('checked', true);
                        if (respuestas[i].respuesta == false){
                            $("#diviPregunta" + (i + 1)).css('display', 'block');
                            if (i == 2 || i == 3) {
                                $("#detalle" + (i + 1)).val(respuestas[i].detalles);
                            }
                        }

                    }
                    else if (tipoPregunta == "date") {
                        $('.pregunta' + respuestas[i].pregunta).val(respuestas[i].detalles);
                    }
                }
            /***************************** FIN Editar Cuestionario ***************************************/


            /******************************* Editar NUEVO Cuestionario******************************************/

            var tipoPregunta = null;
            for (var i = 0; i < respuestas.length; i++) {
                // MODIFICACIÓN CLAVE AQUÍ: se agrega 'N' al selector de clase
                tipoPregunta = $('.pregunta' + respuestas[i].pregunta + 'N').attr("type");

                if (tipoPregunta == "radio") {
                    // MODIFICACIÓN CLAVE AQUÍ: se agrega 'N' al atributo 'name' del radio button
                    $('input:radio[name="pregunta' + respuestas[i].pregunta + 'N"][value="' + respuestas[i].respuesta + '"]').prop('checked', true);

                    if (respuestas[i].respuesta == false) {
                        // Aquí, si 'diviPregunta' también tiene el sufijo 'N', necesitarías ajustar esto.
                        // Por ejemplo, si tienes diviPregunta1N, diviPregunta2N, etc.
                        // Si 'diviPregunta' no tiene 'N', déjalo como está.
                        $("#diviPregunta" + (i + 1) + 'N').css('display', 'block');

                        // Similarmente, si 'detalle' también usa el sufijo 'N', ajusta aquí.
                        // Por ejemplo, si tienes detalle1N, detalle2N, etc.
                        // Si 'detalle' no tiene 'N', déjalo como está.
                        if (i == 2 || i == 3) { // Esto podría necesitar ser ajustado si el índice de tus preguntas 'N' cambia.
                            $("#detalle" + (i + 1) + 'N').val(respuestas[i].detalles);
                        }
                    }
                }
                else if (tipoPregunta == "date") {
                    // MODIFICACIÓN CLAVE AQUÍ: se agrega 'N' al selector de clase
                    $('.pregunta' + respuestas[i].pregunta + 'N').val(respuestas[i].detalles);
                }
            }
            /******************************* FIN Editar NUEVO Cuestionario******************************************/



            /******************************* Cambio de Respuestas *****************************************/
                ////$('.pregunta2').change(function () {
                ////    let tf = $(this).val();
                ////    let pr = $(this).data('pregunta');
                ////    if (tf == "true") {
                ////        axios.get('/transporte/totalIncidencia/' + model.id + '/'+pr).then(total => {
                ////            if (total.data > 0) {
                ////                Swal.fire({
                ////                    'icon': 'warning',
                ////                    'title': 'Servicio de Transporte de Personal',
                ////                    'html': '<strong>Advertencia:</strong><p>Tiene incidencias capturadas en esta pregunta, al cambiar la respuesta de "NO" a "SI" ' +
                ////                        '<strong>se borrarán todas las incidencias. ¿Deseas continuar? </strong></p>',
                ////                    'confirmButtonColor': '#3085d6',
                ////                    'cancelButtonColor': '#d33',
                ////                    'confirmButtonText': 'Si, eliminar',
                ////                    'cancelButtonText': 'Cancelar',
                ////                    'showCancelButton': true
                ////                }).then(p => {
                ////                    if (p.isConfirmed) {
                ////                        Swal.fire({
                ////                            'icon': 'warning',
                ////                            'title': 'Servicio de Transporte de Personal',
                ////                            'text': 'Escriba la palabra ELIMINAR en mayúsculas para confirmar el cambio de respuesta.',
                ////                            'confirmButtonColor': '#3085d6',
                ////                            'cancelButtonColor': '#d33',
                ////                            'confirmButtonText': 'Si, eliminar todo',
                ////                            'cancelButtonText': 'Cancelar',
                ////                            'showCancelButton': true,
                ////                            'input': 'text',
                ////                            'inputPlaceholder': 'Escribe la palabra ELIMINAR'
                ////                        }).then(res => {
                ////                            if (res.value == 'ELIMINAR') {
                ////                                axios.get('/transporte/eliminaIncidencias/' + model.id + '/' + pr).then(r => {
                ////                                    Swal.fire({
                ////                                        'icon': 'success',
                ////                                        'title': 'Servicio de Transporte de Personal',
                ////                                        'text': 'Las incidencias de esta pregunta fueron eliminadas correctamente.',
                ////                                    }).then(function () {
                ////                                        $('input:radio[name="pregunta2"][value="true"]').prop('checked', true);
                ////                                        guardaCedula();
                ////                                        $('#diviPregunta2').css('display', 'none');
                ////                                    });
                ////                                });
                ////                            } else {
                ////                                Swal.fire({
                ////                                    'icon': 'error',
                ////                                    'title': 'Servicio de Transporte de Personal',
                ////                                    'text': 'Debe escribir correctamente la palabra ELIMINAR en mayúsculas.',
                ////                                });
                ////                                $('input:radio[name="pregunta2"][value="false"]').prop('checked', true);
                ////                            }
                ////                        });
                ////                    } else {
                ////                        $('input:radio[name="pregunta2"][value="false"]').prop('checked', true);
                ////                    }
                ////                });
                ////            } else {
                ////                $('#diviPregunta2').css('display', 'none');
                ////            }
                ////        });

                ////    } else {
                ////        $('#diviPregunta2').css('display', 'block');
                ////    }
                ////});

                ////$('.pregunta3').change(function () {
                ////    let tf = $(this).val();
                ////    let pr = $(this).data('pregunta');
                ////    if (tf == "true") {
                ////        $('#diviPregunta3').css('display', 'none');
                ////        $('#detalle3').val('');
                ////    } else {
                ////        $('#diviPregunta3').css('display', 'block');
                ////    }
                ////});

                ////$('.pregunta4').change(function () {
                ////    let tf = $(this).val();
                ////    let pr = $(this).data('pregunta');
                ////    if (tf == "true") {
                ////        $('#diviPregunta4').css('display', 'none');
                ////        $('#detalle4').val('');
                ////    } else {
                ////        $('#diviPregunta4').css('display', 'block');
                ////    }
                ////});

                //$('.pregunta5').change(function () {
                //    let tf = $(this).val();
                //    let pr = $(this).data('pregunta');
                //    if (tf == "true") {
                //        axios.get('/transporte/totalIncidencia/' + model.id + '/' + pr).then(total => {
                //            if (total.data > 0) {
                //                Swal.fire({
                //                    'icon': 'warning',
                //                    'title': 'Servicio de Transporte de Personal',
                //                    'html': '<strong>Advertencia:</strong><p>Tiene incidencias capturadas en esta pregunta, al cambiar la respuesta de "NO" a "SI" ' +
                //                        '<strong>se borrarán todas las incidencias. ¿Deseas continuar? </strong></p>',
                //                    'confirmButtonColor': '#3085d6',
                //                    'cancelButtonColor': '#d33',
                //                    'confirmButtonText': 'Si, eliminar',
                //                    'cancelButtonText': 'Cancelar',
                //                    'showCancelButton': true
                //                }).then(p => {
                //                    if (p.isConfirmed) {
                //                        Swal.fire({
                //                            'icon': 'warning',
                //                            'title': 'Servicio de Transporte de Personal',
                //                            'text': 'Escriba la palabra ELIMINAR en mayúsculas para confirmar el cambio de respuesta.',
                //                            'confirmButtonColor': '#3085d6',
                //                            'cancelButtonColor': '#d33',
                //                            'confirmButtonText': 'Si, eliminar todo',
                //                            'cancelButtonText': 'Cancelar',
                //                            'showCancelButton': true,
                //                            'input': 'text',
                //                            'inputPlaceholder': 'Escribe la palabra ELIMINAR'
                //                        }).then(res => {
                //                            if (res.value == 'ELIMINAR') {
                //                                axios.get('/transporte/eliminaIncidencias/' + model.id + '/' + pr).then(r => {
                //                                    Swal.fire({
                //                                        'icon': 'success',
                //                                        'title': 'Servicio de Transporte de Personal',
                //                                        'text': 'Las incidencias de esta pregunta fueron eliminadas correctamente.',
                //                                    }).then(function () {
                //                                        $('input:radio[name="pregunta5"][value="true"]').prop('checked', true);
                //                                        guardaCedula();
                //                                        $('#diviPregunta5').css('display', 'none');
                //                                    });
                //                                });
                //                            } else {
                //                                Swal.fire({
                //                                    'icon': 'error',
                //                                    'title': 'Servicio de Transporte de Personal',
                //                                    'text': 'Debes escribir correctamente la palabra ELIMINAR en mayúsculas.',
                //                                });
                //                                $('input:radio[name="pregunta5"][value="false"]').prop('checked', true);
                //                            }
                //                        });
                //                    } else {
                //                        $('input:radio[name="pregunta5"][value="false"]').prop('checked', true);
                //                    }
                //                });
                //            } else {
                //                $('#diviPregunta5').css('display', 'none');
                //            }
                //        });
                //    } else {
                //        $('#diviPregunta5').css('display', 'block');
                //    }
                //});

                //$('.pregunta6').change(function () {
                //    let tf = $(this).val();
                //    let pr = $(this).data('pregunta');
                //    if (tf == "true") {
                //        axios.get('/transporte/totalIncidencia/' + model.id + '/' + pr).then(total => {
                //            if (total.data > 0) {
                //                Swal.fire({
                //                    'icon': 'warning',
                //                    'title': 'Servicio de Transporte de Personal',
                //                    'html': '<strong>Advertencia:</strong><p>Tiene incidencias capturadas en esta pregunta, al cambiar la respuesta de "NO" a "SI" ' +
                //                        '<strong>se borrarán todas las incidencias. ¿Deseas continuar? </strong></p>',
                //                    'confirmButtonColor': '#3085d6',
                //                    'cancelButtonColor': '#d33',
                //                    'confirmButtonText': 'Si, eliminar',
                //                    'cancelButtonText': 'Cancelar',
                //                    'showCancelButton': true
                //                }).then(p => {
                //                    if (p.isConfirmed) {
                //                        Swal.fire({
                //                            'icon': 'warning',
                //                            'title': 'Servicio de Transporte de Personal',
                //                            'text': 'Escriba la palabra ELIMINAR en mayúsculas para confirmar el cambio de respuesta.',
                //                            'confirmButtonColor': '#3085d6',
                //                            'cancelButtonColor': '#d33',
                //                            'confirmButtonText': 'Si, eliminar todo',
                //                            'cancelButtonText': 'Cancelar',
                //                            'showCancelButton': true,
                //                            'input': 'text',
                //                            'inputPlaceholder': 'Escribe la palabra ELIMINAR'
                //                        }).then(res => {
                //                            if (res.value == 'ELIMINAR') {
                //                                axios.get('/transporte/eliminaIncidencias/' + model.id + '/' + pr).then(r => {
                //                                    Swal.fire({
                //                                        'icon': 'success',
                //                                        'title': 'Servicio de Transporte de Personal',
                //                                        'text': 'Las incidencias de esta pregunta fueron eliminadas correctamente.',
                //                                    }).then(function () {
                //                                        $('input:radio[name="pregunta6"][value="true"]').prop('checked', true);
                //                                        guardaCedula();
                //                                        $('#diviPregunta6').css('display', 'none');
                //                                    });
                //                                });
                //                            } else {
                //                                Swal.fire({
                //                                    'icon': 'error',
                //                                    'title': 'Servicio de Transporte de Personal',
                //                                    'text': 'Debe escribir correctamente la palabra ELIMINAR en mayúsculas.',
                //                                });
                //                                $('input:radio[name="pregunta6"][value="false"]').prop('checked', true);
                //                            }
                //                        });
                //                    } else {
                //                        $('input:radio[name="pregunta6"][value="false"]').prop('checked', true);
                //                    }
                //                });
                //            } else{
                //                $('#diviPregunta6').css('display', 'none');
                //            }
                //        });
                //    } else {
                //        $('#diviPregunta6').css('display', 'block');
                //    }
                //});

            //PREGUNTAS NUEVO CONTRATO
            $('.pregunta2').change(function () {
                let tf = $(this).val();
                let pr = $(this).data('pregunta');
                if (tf == "true") {
                    axios.get('/transporte/totalIncidencia/' + model.id + '/' + pr).then(total => {
                        if (total.data > 0) {
                            Swal.fire({
                                'icon': 'warning',
                                'title': 'Servicio de Transporte de Personal',
                                'html': '<strong>Advertencia:</strong><p>Tiene incidencias capturadas en esta pregunta, al cambiar la respuesta de "NO" a "SI" ' +
                                    '<strong>se borrarán todas las incidencias. ¿Deseas continuar? </strong></p>',
                                'confirmButtonColor': '#3085d6',
                                'cancelButtonColor': '#d33',
                                'confirmButtonText': 'Si, eliminar',
                                'cancelButtonText': 'Cancelar',
                                'showCancelButton': true
                            }).then(p => {
                                if (p.isConfirmed) {
                                    Swal.fire({
                                        'icon': 'warning',
                                        'title': 'Servicio de Transporte de Personal',
                                        'text': 'Escriba la palabra ELIMINAR en mayúsculas para confirmar el cambio de respuesta.',
                                        'confirmButtonColor': '#3085d6',
                                        'cancelButtonColor': '#d33',
                                        'confirmButtonText': 'Si, eliminar todo',
                                        'cancelButtonText': 'Cancelar',
                                        'showCancelButton': true,
                                        'input': 'text',
                                        'inputPlaceholder': 'Escribe la palabra ELIMINAR'
                                    }).then(res => {
                                        if (res.value == 'ELIMINAR') {
                                            axios.get('/transporte/eliminaIncidencias/' + model.id + '/' + pr).then(r => {
                                                Swal.fire({
                                                    'icon': 'success',
                                                    'title': 'Servicio de Transporte de Personal',
                                                    'text': 'Las incidencias de esta pregunta fueron eliminadas correctamente.',
                                                }).then(function () {
                                                    $('input:radio[name="pregunta2N"][value="true"]').prop('checked', true);
                                                    guardaCedula();
                                                    $('#diviPregunta2').css('display', 'none');
                                                });
                                            });
                                        } else {
                                            Swal.fire({
                                                'icon': 'error',
                                                'title': 'Servicio de Transporte de Personal',
                                                'text': 'Debe escribir correctamente la palabra ELIMINAR en mayúsculas.',
                                            });
                                            $('input:radio[name="pregunta2"][value="false"]').prop('checked', true);
                                        }
                                    });
                                } else {
                                    $('input:radio[name="pregunta2"][value="false"]').prop('checked', true);
                                }
                            });
                        } else {
                            $('#diviPregunta2').css('display', 'none');
                        }
                    });

                } else {
                    $('#diviPregunta2').css('display', 'block');
                }
            });

            $('.pregunta3').change(function () {
                let tf = $(this).val();
                let pr = $(this).data('pregunta');
                if (tf == "true") {
                    axios.get('/transporte/totalIncidencia/' + model.id + '/' + pr).then(total => {
                        if (total.data > 0) {
                            Swal.fire({
                                'icon': 'warning',
                                'title': 'Servicio de Transporte de Personal',
                                'html': '<strong>Advertencia:</strong><p>Tiene incidencias capturadas en esta pregunta, al cambiar la respuesta de "NO" a "SI" ' +
                                    '<strong>se borrarán todas las incidencias. ¿Deseas continuar? </strong></p>',
                                'confirmButtonColor': '#3085d6',
                                'cancelButtonColor': '#d33',
                                'confirmButtonText': 'Si, eliminar',
                                'cancelButtonText': 'Cancelar',
                                'showCancelButton': true
                            }).then(p => {
                                if (p.isConfirmed) {
                                    Swal.fire({
                                        'icon': 'warning',
                                        'title': 'Servicio de Transporte de Personal',
                                        'text': 'Escriba la palabra ELIMINAR en mayúsculas para confirmar el cambio de respuesta.',
                                        'confirmButtonColor': '#3085d6',
                                        'cancelButtonColor': '#d33',
                                        'confirmButtonText': 'Si, eliminar todo',
                                        'cancelButtonText': 'Cancelar',
                                        'showCancelButton': true,
                                        'input': 'text',
                                        'inputPlaceholder': 'Escribe la palabra ELIMINAR'
                                    }).then(res => {
                                        if (res.value == 'ELIMINAR') {
                                            axios.get('/transporte/eliminaIncidencias/' + model.id + '/' + pr).then(r => {
                                                Swal.fire({
                                                    'icon': 'success',
                                                    'title': 'Servicio de Transporte de Personal',
                                                    'text': 'Las incidencias de esta pregunta fueron eliminadas correctamente.',
                                                }).then(function () {
                                                    $('input:radio[name="pregunta3"][value="true"]').prop('checked', true);
                                                    guardaCedula();
                                                    $('#diviPregunta3').css('display', 'none');
                                                });
                                            });
                                        } else {
                                            Swal.fire({
                                                'icon': 'error',
                                                'title': 'Servicio de Transporte de Personal',
                                                'text': 'Debe escribir correctamente la palabra ELIMINAR en mayúsculas.',
                                            });
                                            $('input:radio[name="pregunta3"][value="false"]').prop('checked', true);
                                        }
                                    });
                                } else {
                                    $('input:radio[name="pregunta3"][value="false"]').prop('checked', true);
                                }
                            });
                        } else {
                            $('#diviPregunta3').css('display', 'none');
                        }
                    });

                } else {
                    $('#diviPregunta3').css('display', 'block');
                }
            });

            $('.pregunta4').change(function () {
                let tf = $(this).val();
                let pr = $(this).data('pregunta');
                if (tf == "true") {
                    axios.get('/transporte/totalIncidencia/' + model.id + '/' + pr).then(total => {
                        if (total.data > 0) {
                            Swal.fire({
                                'icon': 'warning',
                                'title': 'Servicio de Transporte de Personal',
                                'html': '<strong>Advertencia:</strong><p>Tiene incidencias capturadas en esta pregunta, al cambiar la respuesta de "NO" a "SI" ' +
                                    '<strong>se borrarán todas las incidencias. ¿Deseas continuar? </strong></p>',
                                'confirmButtonColor': '#3085d6',
                                'cancelButtonColor': '#d33',
                                'confirmButtonText': 'Si, eliminar',
                                'cancelButtonText': 'Cancelar',
                                'showCancelButton': true
                            }).then(p => {
                                if (p.isConfirmed) {
                                    Swal.fire({
                                        'icon': 'warning',
                                        'title': 'Servicio de Transporte de Personal',
                                        'text': 'Escriba la palabra ELIMINAR en mayúsculas para confirmar el cambio de respuesta.',
                                        'confirmButtonColor': '#3085d6',
                                        'cancelButtonColor': '#d33',
                                        'confirmButtonText': 'Si, eliminar todo',
                                        'cancelButtonText': 'Cancelar',
                                        'showCancelButton': true,
                                        'input': 'text',
                                        'inputPlaceholder': 'Escribe la palabra ELIMINAR'
                                    }).then(res => {
                                        if (res.value == 'ELIMINAR') {
                                            axios.get('/transporte/eliminaIncidencias/' + model.id + '/' + pr).then(r => {
                                                Swal.fire({
                                                    'icon': 'success',
                                                    'title': 'Servicio de Transporte de Personal',
                                                    'text': 'Las incidencias de esta pregunta fueron eliminadas correctamente.',
                                                }).then(function () {
                                                    $('input:radio[name="pregunta4"][value="true"]').prop('checked', true);
                                                    guardaCedula();
                                                    $('#diviPregunta4').css('display', 'none');
                                                });
                                            });
                                        } else {
                                            Swal.fire({
                                                'icon': 'error',
                                                'title': 'Servicio de Transporte de Personal',
                                                'text': 'Debe escribir correctamente la palabra ELIMINAR en mayúsculas.',
                                            });
                                            $('input:radio[name="pregunta4"][value="false"]').prop('checked', true);
                                        }
                                    });
                                } else {
                                    $('input:radio[name="pregunta4"][value="false"]').prop('checked', true);
                                }
                            });
                        } else {
                            $('#diviPregunta4').css('display', 'none');
                        }
                    });

                } else {
                    $('#diviPregunta4').css('display', 'block');
                }
            });

            $('.pregunta5').change(function () {
                let tf = $(this).val();
                let pr = $(this).data('pregunta');
                if (tf == "true") {
                    axios.get('/transporte/totalIncidencia/' + model.id + '/' + pr).then(total => {
                        if (total.data > 0) {
                            Swal.fire({
                                'icon': 'warning',
                                'title': 'Servicio de Transporte de Personal',
                                'html': '<strong>Advertencia:</strong><p>Tiene incidencias capturadas en esta pregunta, al cambiar la respuesta de "NO" a "SI" ' +
                                    '<strong>se borrarán todas las incidencias. ¿Deseas continuar? </strong></p>',
                                'confirmButtonColor': '#3085d6',
                                'cancelButtonColor': '#d33',
                                'confirmButtonText': 'Si, eliminar',
                                'cancelButtonText': 'Cancelar',
                                'showCancelButton': true
                            }).then(p => {
                                if (p.isConfirmed) {
                                    Swal.fire({
                                        'icon': 'warning',
                                        'title': 'Servicio de Transporte de Personal',
                                        'text': 'Escriba la palabra ELIMINAR en mayúsculas para confirmar el cambio de respuesta.',
                                        'confirmButtonColor': '#3085d6',
                                        'cancelButtonColor': '#d33',
                                        'confirmButtonText': 'Si, eliminar todo',
                                        'cancelButtonText': 'Cancelar',
                                        'showCancelButton': true,
                                        'input': 'text',
                                        'inputPlaceholder': 'Escribe la palabra ELIMINAR'
                                    }).then(res => {
                                        if (res.value == 'ELIMINAR') {
                                            axios.get('/transporte/eliminaIncidencias/' + model.id + '/' + pr).then(r => {
                                                Swal.fire({
                                                    'icon': 'success',
                                                    'title': 'Servicio de Transporte de Personal',
                                                    'text': 'Las incidencias de esta pregunta fueron eliminadas correctamente.',
                                                }).then(function () {
                                                    $('input:radio[name="pregunta5"][value="true"]').prop('checked', true);
                                                    guardaCedula();
                                                    $('#diviPregunta5').css('display', 'none');
                                                });
                                            });
                                        } else {
                                            Swal.fire({
                                                'icon': 'error',
                                                'title': 'Servicio de Transporte de Personal',
                                                'text': 'Debes escribir correctamente la palabra ELIMINAR en mayúsculas.',
                                            });
                                            $('input:radio[name="pregunta5"][value="false"]').prop('checked', true);
                                        }
                                    });
                                } else {
                                    $('input:radio[name="pregunta5"][value="false"]').prop('checked', true);
                                }
                            });
                        } else {
                            $('#diviPregunta5').css('display', 'none');
                        }
                    });
                } else {
                    $('#diviPregunta5').css('display', 'block');
                }
            });

            $('.pregunta6').change(function () {
                let tf = $(this).val();
                let pr = $(this).data('pregunta');
                if (tf == "true") {
                    axios.get('/transporte/totalIncidencia/' + model.id + '/' + pr).then(total => {
                        if (total.data > 0) {
                            Swal.fire({
                                'icon': 'warning',
                                'title': 'Servicio de Transporte de Personal',
                                'html': '<strong>Advertencia:</strong><p>Tiene incidencias capturadas en esta pregunta, al cambiar la respuesta de "NO" a "SI" ' +
                                    '<strong>se borrarán todas las incidencias. ¿Deseas continuar? </strong></p>',
                                'confirmButtonColor': '#3085d6',
                                'cancelButtonColor': '#d33',
                                'confirmButtonText': 'Si, eliminar',
                                'cancelButtonText': 'Cancelar',
                                'showCancelButton': true
                            }).then(p => {
                                if (p.isConfirmed) {
                                    Swal.fire({
                                        'icon': 'warning',
                                        'title': 'Servicio de Transporte de Personal',
                                        'text': 'Escriba la palabra ELIMINAR en mayúsculas para confirmar el cambio de respuesta.',
                                        'confirmButtonColor': '#3085d6',
                                        'cancelButtonColor': '#d33',
                                        'confirmButtonText': 'Si, eliminar todo',
                                        'cancelButtonText': 'Cancelar',
                                        'showCancelButton': true,
                                        'input': 'text',
                                        'inputPlaceholder': 'Escribe la palabra ELIMINAR'
                                    }).then(res => {
                                        if (res.value == 'ELIMINAR') {
                                            axios.get('/transporte/eliminaIncidencias/' + model.id + '/' + pr).then(r => {
                                                Swal.fire({
                                                    'icon': 'success',
                                                    'title': 'Servicio de Transporte de Personal',
                                                    'text': 'Las incidencias de esta pregunta fueron eliminadas correctamente.',
                                                }).then(function () {
                                                    $('input:radio[name="pregunta6"][value="true"]').prop('checked', true);
                                                    guardaCedula();
                                                    $('#diviPregunta6').css('display', 'none');
                                                });
                                            });
                                        } else {
                                            Swal.fire({
                                                'icon': 'error',
                                                'title': 'Servicio de Transporte de Personal',
                                                'text': 'Debe escribir correctamente la palabra ELIMINAR en mayúsculas.',
                                            });
                                            $('input:radio[name="pregunta6"][value="false"]').prop('checked', true);
                                        }
                                    });
                                } else {
                                    $('input:radio[name="pregunta6"][value="false"]').prop('checked', true);
                                }
                            });
                        } else {
                            $('#diviPregunta6').css('display', 'none');
                        }
                    });
                } else {
                    $('#diviPregunta6').css('display', 'block');
                }
            });

            $('.pregunta7').change(function () {
                let tf = $(this).val();
                let pr = $(this).data('pregunta');
                if (tf == "true") {
                    axios.get('/transporte/totalIncidencia/' + model.id + '/' + pr).then(total => {
                        if (total.data > 0) {
                            Swal.fire({
                                'icon': 'warning',
                                'title': 'Servicio de Transporte de Personal',
                                'html': '<strong>Advertencia:</strong><p>Tiene incidencias capturadas en esta pregunta, al cambiar la respuesta de "NO" a "SI" ' +
                                    '<strong>se borrarán todas las incidencias. ¿Deseas continuar? </strong></p>',
                                'confirmButtonColor': '#3085d6',
                                'cancelButtonColor': '#d33',
                                'confirmButtonText': 'Si, eliminar',
                                'cancelButtonText': 'Cancelar',
                                'showCancelButton': true
                            }).then(p => {
                                if (p.isConfirmed) {
                                    Swal.fire({
                                        'icon': 'warning',
                                        'title': 'Servicio de Transporte de Personal',
                                        'text': 'Escriba la palabra ELIMINAR en mayúsculas para confirmar el cambio de respuesta.',
                                        'confirmButtonColor': '#3085d6',
                                        'cancelButtonColor': '#d33',
                                        'confirmButtonText': 'Si, eliminar todo',
                                        'cancelButtonText': 'Cancelar',
                                        'showCancelButton': true,
                                        'input': 'text',
                                        'inputPlaceholder': 'Escribe la palabra ELIMINAR'
                                    }).then(res => {
                                        if (res.value == 'ELIMINAR') {
                                            axios.get('/transporte/eliminaIncidencias/' + model.id + '/' + pr).then(r => {
                                                Swal.fire({
                                                    'icon': 'success',
                                                    'title': 'Servicio de Transporte de Personal',
                                                    'text': 'Las incidencias de esta pregunta fueron eliminadas correctamente.',
                                                }).then(function () {
                                                    $('input:radio[name="pregunta7"][value="true"]').prop('checked', true);
                                                    guardaCedula();
                                                    $('#diviPregunta7').css('display', 'none');
                                                });
                                            });
                                        } else {
                                            Swal.fire({
                                                'icon': 'error',
                                                'title': 'Servicio de Transporte de Personal',
                                                'text': 'Debe escribir correctamente la palabra ELIMINAR en mayúsculas.',
                                            });
                                            $('input:radio[name="pregunta7"][value="false"]').prop('checked', true);
                                        }
                                    });
                                } else {
                                    $('input:radio[name="pregunta7"][value="false"]').prop('checked', true);
                                }
                            });
                        } else {
                            $('#diviPregunta7').css('display', 'none');
                        }
                    });
                } else {
                    $('#diviPregunta7').css('display', 'block');
                }
            });
   
            /******************************* FIN Cambio de Respuestas ************************************/

            /******************************* Incidencias TRANSPORTE ***************************************/
                function muestraInputs(pregunta) {
                    $('#divCategoria').css('display', 'none');
                    $('#divFechaIncidencia').css('display', 'none');
                    $('#divHoraIncidencia').css('display', 'none');
                    $('#checklistContainer').css('display', 'none');

                    $('#divInciComentarios').css('display', 'none');
                    $('#error_fechaIncidencia').css('display', 'none');
                    $('#error_horaIncidencia').css('display', 'none');
                    $('#error_inciComentarios').css('display', 'none');

                    if (pregunta == 2) {
                        $("#categoria").val('Obligaciones Generales');
                        $('#divFechaIncidencia').css('display', 'block');
                        $('#divInciComentarios').css('display', 'block');
                    } else if (pregunta == 3) {
                        $("#categoria").val('Entrega de Documentos');
                        $('#divFechaIncidencia').css('display', 'block');
                        $('#divInciComentarios').css('display', 'block');
                    } else if (pregunta == 4) {
                        $("#categoria").val('Infraestructura');
                        $('#divFechaIncidencia').css('display', 'block');
                        $('#divInciComentarios').css('display', 'block');
                    } else if (pregunta == 5) {
                        $("#categoria").val('Capacitación del Operador');
                        $('#divFechaIncidencia').css('display', 'block');
                        $('#divInciComentarios').css('display', 'block');
                    } else if (pregunta == 6) {
                        $("#categoria").val('Obligaciones de los operadores');
                        $('#divFechaIncidencia').css('display', 'block');
                        $('#checklistContainer').css('display', 'block');
                        $('#divInciComentarios').css('display', 'block');
                    } else if (pregunta == 7) {
                        $("#categoria").val('Horarios y Rutas');
                        $('#divFechaIncidencia').css('display', 'block');
                        $('#divInciComentarios').css('display', 'block');
                    }
                }

                $(".addIncidencias").click(function () {
                    $('#id_incidencia').val('');
                    $('#categoria').val('');
                    $('#pregunta').val('');
                    $('#fechaIncidencia').val('');
                    $('#horaIncidencia').val('');
                    $('#inciComentarios').val('');

                    $('#divFechaIncidencia').css('display', 'none');
                    $('#divHoraIncidencia').css('display', 'none');
                    $('#divInciComentarios').css('display', 'none');
                    $('#error_fechaIncidencia').css('display', 'none');
                    $('#error_horaIncidencia').css('display', 'none');
                    $('#error_inciComentarios').css('display', 'none');
                    let pregunta = $(this).data('pregunta');
                    muestraInputs(pregunta);
                    $("#pregunta").val(pregunta+"");
                    $("#id_incidencia").val("");
                    $("#modal-incidencias").modal('show');
                });

                $(".viewIncidencias").click(function () {
                    let pregunta = $(this).data('pregunta');

                    axios.get('/transporte/tablaIncidencias/' + model.id + '/' + pregunta).then(table => {
                        $("#tbl_incidencias").html(table.data);
                    }).catch(error => {
                        Swal.fire({
                            'icon': 'error',
                            'title': 'Servicio de Transporte de Personal',
                            'html': 'Hubo un error al obtener el listado de incidencias. Contacte a su administrador del sistema.'
                        });
                    });
                    $("#modal-consultaIncidencias").modal('show');
                });

                $('#fechaIncidencia').change(function () {
                    if ($(this).val() == '') {
                        $('#fechaIncidencia').removeClass('is-valid');
                        $('#fechaIncidencia').addClass('is-invalid');
                        $('#error_fechaIncidencia').css('display', 'block');
                    }else{
                        $('#fechaIncidencia').removeClass('is-invalid');
                        $('#fechaIncidencia').addClass('is-valid');
                        $('#error_fechaIncidencia').css('display', 'none');
                    }
                });

                $('#horaIncidencia').change(function () {
                    if ($(this).val() == '') {
                        $('#horaIncidencia').removeClass('is-valid');
                        $('#horaIncidencia').addClass('is-invalid');
                        $('#error_horaIncidencia').css('display', 'block');
                    }else{
                        $('#horaIncidencia').removeClass('is-invalid');
                        $('#horaIncidencia').addClass('is-valid');
                        $('#error_horaIncidencia').css('display', 'none');
                    }
                 });

                $('#inciComentarios').change(function () {
                    if ($(this).val() == '') {
                        $('#inciComentarios').removeClass('is-valid');
                        $('#inciComentarios').addClass('is-invalid');
                        $('#error_inciComentarios').css('display', 'block');
                    }else{
                        $('#inciComentarios').removeClass('is-invalid');
                        $('#inciComentarios').addClass('is-valid');
                        $('#error_inciComentarios').css('display', 'none');
                    }
                });

                function validaIncidencias() {
                    let tipo = $('#categoria').val();
                    let fechaIncidencia = $('#fechaIncidencia').val();
                    let horaIncidencia = $('#horaIncidencia').val();
                    let comentarios = $('#inciComentarios').val();

                    if (tipo != "Horario y Ruta Estipulado") {
                        if (fechaIncidencia == '') {
                            $('#fechaIncidencia').addClass('is-invalid');
                            $('#error_fechaIncidencia').css('display', 'block');
                        }
                        if (comentarios == '') {
                            $('#inciComentarios').addClass('is-invalid');
                            $('#error_inciComentarios').css('display', 'block');
                        }

                        if (fechaIncidencia != '' && comentarios != '') {
                            return true;
                        }
                    } else {
                        if (fechaIncidencia == '') {
                            $('#fechaIncidencia').addClass('is-invalid');
                            $('#error_fechaIncidencia').css('display', 'block');
                        }
                        if (horaIncidencia == '') {
                            $('#horaIncidencia').addClass('is-invalid');
                            $('#error_horaIncidencia').css('display', 'block');
                        }
                        if (comentarios == '') {
                            $('#inciComentarios').addClass('is-invalid');
                            $('#error_inciComentarios').css('display', 'block');
                        }
                        if (fechaIncidencia != '' && horaIncidencia != '' && comentarios != '') {
                            return true;
                        }
                    }
                    return false;
                }

                $('#guardaIncidencia').click(function () {
                    let html = "";
                    let id = $('#id_incidencia').val();
                    let tipo = $('#categoria').val();
                    let pregunta = $('#pregunta').val() != "" ? $('#pregunta').val(): 0;
                    let fechaIncidencia= $('#fechaIncidencia').val() != '' ? $('#fechaIncidencia').val() : '1990-01-01';
                    let horaIncidencia = $('#horaIncidencia').val() != '' ? $('#horaIncidencia').val() : '00:00:00';
                    let comentarios = $('#inciComentarios').val();

                    if (id == "" || id == null) {
                        id = 0;
                    }

                    if (validaIncidencias()) {
                        if (id == 0) {
                            axios.post("/transporte/inserta/incidencia", {
                                Id: parseInt(id), CedulaTransporteId: parseInt(model.id), Tipo: tipo, Pregunta: parseInt(pregunta),
                                FechaIncidencia: fechaIncidencia, HoraPresentada: horaIncidencia, Comentarios: comentarios
                            }).then(response => {
                                if (response.status == 200) {
                                    Swal.fire({
                                        'icon': "success",
                                        'title': 'Servicio de Transporte de Personal',
                                        'html': "La incidencia fue registrada correctamente."
                                    });
                                    guardaCedula();

                                    window.location.reload();
                                }
                            }).catch(error => {
                                Swal.fire({
                                    'icon': "error",
                                    'title': 'Servicio de Transporte de Personal',
                                    'html': "Hubo un error al registrar la incidencia. Contacte al administrador del sistema."
                                });
                            });
                        } else {
                            axios.post("/transporte/actualiza/incidencia", { Id: parseInt(id), Tipo: tipo, FechaIncidencia: fechaIncidencia,
                                                                             HoraPresentada: horaIncidencia,  Comentarios: comentarios
                            }).then(response => {
                                if (response.status == 200) {
                                    Swal.fire({
                                        'icon': "success",
                                        'title': 'Servicio de Transporte de Personal',
                                        'html': "La incidencia fue actualizada correctamente."
                                    });
                                    guardaCedula();
                                }
                            }).catch(error => {
                                Swal.fire({
                                    'icon': "error",
                                    'title': 'Servicio de Transporte de Personal',
                                    'html': "Hubo un error al actualizar la incidencia. Contacte al administrador del sistema."
                                });
                            });
                        }
                        $('#id_incidencia').val('');
                        $('#categoria').val('');
                        $('#pregunta').val('');
                        $('#fechaIncidencia').val('');
                        $('#horaIncidencia').val('');
                        $('#inciComentarios').val('');
                        $('#inciComentarios').removeClass('is-valid');
                        $('#inciComentarios').removeClass('is-invalid');
                        $('#horaIncidencia').removeClass('is-invalid');
                        $('#horaIncidencia').removeClass('is-valid');
                        $('#fechaIncidencia').removeClass('is-invalid');
                        $('#fechaIncidencia').removeClass('is-valid');
                    }
                });

            $(document).ready(function () {
                // Función para actualizar el textarea de comentarios
                function updateInciComentarios() {
                    let selectedOptions = [];
                    // Itera sobre todos los checkboxes con la clase 'incidencia-option'
                    $('.incidencia-option:checked').each(function () {
                        // Obtiene el texto de la etiqueta asociada al checkbox seleccionado
                        // Se usa .text().trim() para obtener solo el texto y eliminar espacios extra
                        // Quitar los íconos de la cadena para que no se muestren en los comentarios
                        let labelText = $(this).next('label').text().trim();
                        // Eliminar cualquier icono de Font Awesome del texto (si hay)
                        selectedOptions.push(labelText);
                    });

                    let commentsText = "";
                    if (selectedOptions.length > 0) {
                        commentsText = "Incumplimiento por: " + selectedOptions.join(', ') + ".";
                    }

                    // Asigna el texto al campo de comentarios
                    $('#inciComentarios').val(commentsText);

                    // Opcional: Mostrar u ocultar el mensaje de error si el campo está vacío
                    if (selectedOptions.length > 0) {
                        $('#error_inciComentarios').hide();
                    } else {
                        // Si el checklist se muestra pero no hay opciones seleccionadas, aún podrías necesitar el error.
                        // Considera la lógica de cuándo este campo es 'obligatorio'.
                         $('#error_inciComentarios').show(); 
                    }
                }

                // Llama a la función cada vez que un checkbox cambie
                $('#checklistTipoIncidencia .incidencia-option').on('change', function () {
                    updateInciComentarios();
                });

                // Opcional: Llama a la función al cargar la página si el checklist ya está visible
                // y podrías tener opciones pre-seleccionadas (ej. en una edición)
                if ($('#checklistContainer').is(':visible')) {
                    updateInciComentarios();
                }
            });
                

                $(document).on("click", ".update_incidencia", function () {
                    $('#id_incidencia').val('');
                    $('#categoria').val('');
                    $('#pregunta').val('');
                    $('#fechaIncidencia').val('');
                    $('#horaIncidencia').val('');
                    $('#inciComentarios').val('');

                    $('#divFechaIncidencia').css('display', 'none');
                    $('#divHoraIncidencia').css('display', 'none');
                    $('#divInciComentarios').css('display', 'none');
                    $('#error_fechaIncidencia').css('display', 'none');
                    $('#error_horaIncidencia').css('display', 'none');
                    $('#error_inciComentarios').css('display', 'none');
                    $("#modal-consultaIncidencias").modal('hide');
                    let tipo = $(this).data('tipo');
                    $("#id_incidencia").val($(this).data('id'));
                    $("#categoria").val(tipo);

                    if (tipo == "Horario y Ruta Estipulado") {
                        $('#divFechaIncidencia').css('display', 'block');
                        $('#divHoraIncidencia').css('display', 'block');
                        $('#divInciComentarios').css('display', 'block');

                        $('#fechaIncidencia').val($(this).data('fechainci'));
                        $('#horaIncidencia').val($(this).data('hora'));
                        $('#inciComentarios').val($(this).data('coment'))
                    } else {
                        $('#fechaIncidencia').val($(this).data('fechainci'));
                        $('#inciComentarios').val($(this).data('coment'))
                        $('#divFechaIncidencia').css('display', 'block');
                        $('#divInciComentarios').css('display', 'block');
                    }
                    $("#modal-incidencias").modal('show');
                });

                $(document).on("click", ".delete_incidencia", function(){
                    var id = $(this).data("id");

                    Swal.fire({
                            'icon': 'warning',
                            'title': 'Servicio de Transporte de Personal',
                            'html': '¿Está seguro de eliminar la incidencia?',
                            'confirmButtonColor': '#3085d6',
                            'cancelButtonColor': '#d33',
                            'confirmButtonText': 'Si, eliminar incidencia',
                            'cancelButtonText': 'Cancelar',
                            'showCancelButton': true
                        }).then(response => {
                            if (response.isConfirmed) {
                                axios.get("/transporte/incidencia/eliminar/"+id).then(response => {
                                    if (response.status == 200) {
                                        Swal.fire(
                                            'Servicio de Transporte de Personal',
                                            'La incidencia fue eliminada correctamente.',
                                            'success'
                                        ).then(function () {
                                            window.location.reload();
                                        });
                                    }
                                }).catch(error => {
                                    Swal.fire(
                                        'Servicio de Transporte de Personal',
                                        'No se pudo eliminar la incidencia del servicio de fumigación. Contacta a tu Administrador.',
                                        'error'
                                    );
                                });
                            }
                        });

                });
            /******************************* FIN Incidencias Fumigación **********************************/

            /************************************ Adjuntar Entregables ************************************/
                  /*Modal para Adjuntar Archivos*/
                     $('.btn_addFile').click(function () {
                        $('#tipo_entregable').prop('disabled', false);
                         var option = '<option value="">Seleccione un Entregable</option>';

                         option += "<option value='ActaER'>Acta Entrega - Recepción</option>";
                         option += "<option value='Cedula_Firmada'>Cédula Firmada (FIREL)</option>";


                        axios.get('/variables/getEntregables/' + model.servicioId + '/' + model.id).then(entre => {
                            entre = entre.data;
                            for (var i = 0; i < entre.length; i++) {
                                option += "<option value='" + entre[i].abreviacion + "'>" + entre[i].valor + "</option>";
                            }
                            $('#tipo_entregable').html(option);
                        });
                        $('#modal_evidencias').modal('show');
                    });
                /*FIN del modal para adjuntar archivos*/

                /*Adjunta Entregables*/
                    function validaCamposArchivo() {

                        if ($('#tipo_entregable').val() == "" && $('#customFile').val() == "") {
                            $('#tipo_entregable').addClass('is-invalid');
                            $('#error_tipoEntre').css('display', 'block');

                            $('#customFile').addClass('is-invalid');
                            $('#error_customFile').css('display', 'block');

                            return false;
                        }

                        if ($('#tipo_entregable').val() == "" ) {
                            $('#tipo_entregable').addClass('is-invalid');
                            $('#error_tipoEntre').css('display', 'block');

                            return false;
                        }

                        if (($('#customFile').val() == "" && $('.custom-file-label').text() == "")) {

                            $('#customFile').addClass('is-invalid');
                            $('#error_customFile').css('display', 'block');

                            return false;
                        }

                        return true;
                }

                    $("#customFile").on("change", function () {
                        var fileName = $(this).val().split("\\").pop();
                        var ext = fileName.split('.').pop();
                        if (ext == "pdf" || ext == "PDF") {
                            $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
                        } else {
                            Swal.fire({
                                'icon': 'error',
                                'title': 'Servicio de Transporte de Personal',
                                'text': 'El archivo que intenta adjuntar no es válido. Favor de solo seleccionar archivos "PDF"'
                            });
                            $(".custom-file-label").text("Seleccionar Archivo");
                            document.getElementById('customFile').value = '';
                            if ($('#customFile').hasClass('is-valid')) {
                                $('#customFile').removeClass('is-valid');
                            }
                            $('#customFile').addClass('is-invalid');
                            $('#error_customFile').css('display', 'block');
                        }

                    });

            //SE MODIFICÓ ESTE METODO PARA PERMITIR LA CARGA DE DOBLES ARCHIVOS PARA TRANSPORTE DE PERSONAL
            $('#adjuntarArchivo').click(function () {
                var formData = new FormData();
                var folio = model.folio;
                var file = document.getElementById('customFile').files[0];
                var id = $('#file_id').val();
                var tipo = $('#tipo_entregable').val();
                var comentarios = $('#comentarios_entregable').val();

                if (id.length > 0) {
                    id = parseInt(id);
                } else {
                    id = 0;
                }

                formData.append("Id", id);
                formData.append("CedulaEvaluacionId", model.id);
                if (file != null)
                    formData.append("Archivo", file);

                formData.append("Folio", folio);
                formData.append("Tipo", tipo);
                formData.append("Comentarios", comentarios);

                if (validaCamposArchivo()) {
                    axios.post('/transporte/adjuntaEntregable', formData, {
                        headers: { 'Content-Type': 'multipart/form-data' }
                    }).then(response => {
                        $('#cerrar_modal_sua').trigger('click');
                        if (response.status == 200) {
                            Swal.fire({
                                'icon': "success",
                                'title': 'Servicio de Transporte de Personal',
                                'text': 'Se adjuntó el archivo correctamente.'
                            }).then(() => {
                                // Recarga la página después de que el usuario hace clic en "Ok"
                                location.reload();
                            });
                            $('#customFile').removeClass('is-valid');
                            $('#comentarios_entregable').removeClass('is-valid');
                            $('#tipo_entregable').removeClass('is-valid');
                        }
                        axios.get("/transporte/getEntregables/" + model.id + "/" + model.servicioId + "/" + model.id).then(success => {
                            $('#tEntregables').html(success.data);
                        });
                    }).catch(error => {
                        Swal.fire({
                            'icon': "error",
                            'title': 'Servicio de Transporte de Personal',
                            'text': 'Se presentó un error al intentar adjuntar el archivo.'
                        });
                    });

                    document.getElementById('customFile').value = '';
                    $('#file_id').val("");
                    $(".custom-file-label").text("Seleccionar Archivo");
                    $('#tipo_entregable').val('');
                    $('#comentarios_entregable').val('');
                }
            });
                    //$('#adjuntarArchivo').click(function () {
                    //    var formData = new FormData();
                    //    var folio = model.folio;
                    //    var file = document.getElementById('customFile').files[0];
                    //    var id = $('#file_id').val();
                    //    var tipo = $('#tipo_entregable').val();
                    //    var comentarios = $('#comentarios_entregable').val();

                    //    if (id.length > 0) {
                    //        id = parseInt(id);
                    //    } else {
                    //        id = 0;
                    //    }

                    //    formData.append("Id", id);
                    //    formData.append("CedulaEvaluacionId", model.id);
                    //    if(file != null)
                    //        formData.append("Archivo", file);

                    //    formData.append("Folio", folio);
                    //    formData.append("Tipo", tipo);
                    //    formData.append("Comentarios", comentarios);

                    //    if (validaCamposArchivo()) {
                    //        if (id != 0) {
                    //            axios.post('/transporte/adjuntaEntregable', formData, {
                    //                headers: { 'Content-Type': 'multipart/form-data' }

                    //            }).then(response => {
                    //                $('#cerrar_modal_sua').trigger('click');
                    //                /*Validamos la pregunta a la que se realizo el anexo de evidencia*/
                    //                if (response.status == 200) {
                    //                    Swal.fire({
                    //                        'icon': "success",
                    //                        'title': 'Servicio de Transporte de Personal',
                    //                        'text': 'Se adjuntó el archivo correctamente.'
                    //                    });
                    //                    $('#customFile').removeClass('is-valid');
                    //                    $('#comentarios_entregable').removeClass('is-valid');
                    //                    $('#tipo_entregable').removeClass('is-valid');
                    //                }
                    //                axios.get("/transporte/getEntregables/" + model.id + "/" + model.servicioId+"/" + model.id).then(success => {
                    //                    if (success.data == null || success.data == "") {
                    //                        $('#tEntregables').html(success.data);
                    //                    }
                    //                    $('#tEntregables').html(success.data);
                    //                });
                    //            }).catch(error => {
                    //                Swal.fire({
                    //                    'icon': "error",
                    //                    'title': 'Servicio de Transporte de Personal',
                    //                    'text': 'Se presento un error al intentar adjuntar el archivo.'
                    //                });
                    //            });

                    //            document.getElementById('customFile').value = '';
                    //            $('#file_id').val("");
                    //            $(".custom-file-label").text("Seleccionar Archivo");
                    //            $('#tipo_entregable').val('');
                    //            $('#comentarios_entregable').val('');
                    //        } else {
                    //            axios.get('/transporte/buscaEntregable/' + model.id + '/' + tipo).then(exist => {
                    //                if (exist.data == 0) {
                    //                    axios.post('/transporte/adjuntaEntregable', formData, {
                    //                        headers: { 'Content-Type': 'multipart/form-data' }

                    //                    }).then(response => {
                    //                        $('#cerrar_modal_sua').trigger('click');
                    //                        /*Validamos la pregunta a la que se realizo el anexo de evidencia*/
                    //                        if (response.status == 200) {
                    //                            Swal.fire({
                    //                                'icon': "success",
                    //                                'title': 'Servicio de Transporte de Personal',
                    //                                'text': 'Se adjuntó el archivo correctamente.'
                    //                            });
                    //                            $('#customFile').removeClass('is-valid');
                    //                            $('#comentarios_entregable').removeClass('is-valid');
                    //                            $('#tipo_entregable').removeClass('is-valid');
                    //                        }
                    //                        axios.get("/transporte/getEntregables/" + model.id + "/" + model.servicioId+"/" + model.id).then(success => {
                    //                            if (success.data == null || success.data == "") {
                    //                                $('#tEntregables').html(success.data);
                    //                            }
                    //                            $('#tEntregables').html(success.data);
                    //                        });
                    //                    }).catch(error => {
                    //                        Swal.fire({
                    //                            'icon': "error",
                    //                            'title': 'Servicio de Transporte de Personal',
                    //                            'text': 'Se presento un error al adjuntar el archivo.'
                    //                        });
                    //                    });

                    //                    document.getElementById('customFile').value = '';
                    //                    $('#file_id').val("");
                    //                    $(".custom-file-label").text("Seleccionar Archivo");
                    //                    $('#tipo_entregable').val('');
                    //                    $('#comentarios_entregable').val('');
                    //                } else {
                    //                    Swal.fire({
                    //                        'icon': "error",
                    //                        'title': 'Servicio de Transporte de Personal',
                    //                        'text': 'Ya existe un mismo entregable con el tipo ' + tipo
                    //                    });
                    //                }
                    //            }).catch(e => {
                    //                Swal.fire({
                    //                    'icon': "error",
                    //                    'title': 'Servicio de Transporte de Personal',
                    //                    'text': 'Ocurrío un error al válidar el entregable.'
                    //                });
                    //            });
                    //        }
                    //    }
                    //});

                /*FIN Adjunta Entregables*/

                /* Listado de Entregables de la Cedula */
                    axios.get("/transporte/getEntregables/" + model.id + "/" + model.servicioId).then(response => {
                        if (response.data == null || response.data == "") {
                            $('#tEntregables').html(response.data);
                        }
                        $('#tEntregables').html(response.data);
                    });
                /* Fin Listado de Entregables de la Cedula*/

                /*Editar Entregables*/
                    $(document).on("click", ".update_files", function () {
                        $('#modal_evidencias').modal('show');
                        var id = $(this).data('id');
                        var tipo = $(this).data('tipo');
                        var coments = $(this).data('coments');
                        var file = $(this).data('file');
                        $('#file_id').val(parseInt(id));
                        $(".custom-file-label").text(file);
                        $('#tipo_entregable').val(tipo);
                        $('#comentarios_entregable').val(coments);
                        $('#mes_correspondiente').prop('disabled', true);
                        $('#modal_evidencias').modal('show');
                    });
                /*FIN de editar Entregables*/

                /*Elimina entregables*/
                   $(document).on("click", ".delete_files", function () {
                        let id = $(this).data('id');
                        let tipo = $(this).data('tipo');
                        Swal.fire({
                            'icon': 'warning',
                            'title': 'Servicio de Transporte de Personal',
                            'text': '¿Está seguro de eliminar el archivo relacionado a "'+tipo+'"?',
                            'confirmButtonColor': '#3085d6',
                            'cancelButtonColor': '#d33',
                            'confirmButtonText': 'Si, Eliminar Archivo',
                            'cancelButtonText': 'Cancelar',
                            'showCancelButton': true
                        }).then(response => {
                            if (response.isConfirmed) {
                                axios.post("/transporte/eliminaArchivo", { Id: id, Folio: model.folio }).then(response => {
                                    if (response.status == 200) {
                                        Swal.fire(
                                            'Servicio de Transporte de Personal',
                                            'El archivo fue eliminado correctamente.',
                                            'success'
                                        ).then(function () {
                                            window.location.reload();
                                        });
                                        axios.get("/transporte/getEntregables/" + model.id + "/" + model.servicioId + "/" + model.id).then(response => {
                                            if (response.data == null || response.data == "") {
                                                $('#tEntregables').html(response.data);
                                            }
                                            $('#tEntregables').html(response.data);
                                           
                                        });
                                    }
                                }).catch(error => {
                                    Swal.fire(
                                        'Servicio de Transporte de Personal',
                                        'No se pudo procesar tu solicitud. Contacta al Administrador.',
                                        'error'
                                    );
                                });
                            }
                        });
                   });
                 /*FIN de elimina entregables*/

            /*Ver archivo en modal*/
            $(document).on('click', '.view_file', function () {
                let nombre = $(this).data('file');
                let tipo = $(this).data('tipo');
                let data = "<object width='100%' height='710px' data='/view/entregable/" + model.folio + "/" + nombre + "'></object>";
                $('#titlePDF').text("PDF - \"" + tipo + "\"");
                $('#objectPdf').html(data);
                $('#show_pdf').modal('show');
            });
            /*FIN de ver archivo en modal*/

                /*Validaciones Entregables*/
                    $('#tipo_entregable').change(function () {
                        if ($('#tipo_entregable').val() == "") {
                            $('#tipo_entregable').addClass('is-invalid');
                            $('#error_tipoEntre').css('display', 'block');

                            return false;
                        } else {
                            $('#tipo_entregable').removeClass('is-invalid');
                            $('#tipo_entregable').addClass('is-valid');
                            $('#error_tipoEntre').css('display', 'none');
                        }
                    });

                    $('#customFile').change(function () {
                         if ($('#customFile').val() == "") {
                             $('#customFile').addClass('is-invalid');
                             $('#error_customFile').css('display', 'block');

                        } else {
                             var fileName = $("#customFile").val().split("\\").pop();
                             var ext = fileName.split('.').pop();
                             if (ext != "pdf") {
                                 $('#customFile').addClass('is-invalid');
                                 $('#error_customFile').css('display', 'block');
                             } else {
                                 $('#customFile').removeClass('is-invalid');
                                 $('#customFile').addClass('is-valid');
                                 $('#error_customFile').css('display', 'none');
                             }
                        }
                     });

                    $('#comentarios_entregable').change(function () {
                        if ($('#comentarios_entregable').val() == "") {
                            $('#comentarios_entregable').addClass('is-invalid');
                            $('#error_comentariosEntre').css('display', 'block');

                            return false;
                        } else {
                            $('#comentarios_entregable').removeClass('is-invalid');
                            $('#comentarios_entregable').addClass('is-valid');
                            $('#error_comentariosEntre').css('display', 'none');
                        }
                    });
                /*FIN de Validaciones Entregables*/
            /********************************** FIN Adjuntar Entregables *********************************/

            /********************************** Funciones Adicionales *********************************/
            function cuentaincidenciasTransporte(pregunta) {
                    var isContinue = true;
                    $.ajax({
                        url: '/transporte/totalIncidencia/' + model.id + '/' + pregunta,
                        type: 'GET',
                        async: false,
                        success: function (json) {
                            json == 0 ? isContinue = false : true;
                        },
                    });
                    return isContinue;
                }
            /********************************** FIN Funciones Asincronas*********************************/

            /************************************ GUARDAR/ENVIAR Cédula ************************************/
                /*Guardar la Cedula*/
                    $('.btn_guardar').click(function () {
                        var respuestas = new Array();
                        for (let i = 0; i < 7; i++) {
                            let type = $('.pregunta'+(i+1)).attr("type");
                            let respuesta = $("input[name=pregunta" + (i + 1) + "]:checked").val();

                            if (type == "date" && $(".pregunta" + (i + 1) + "N").val()) {
                                respuestas.push({ CedulaEvaluacionId: parseInt(model.id), Pregunta: (i + 1), Respuesta: "true", Detalles: $(".pregunta" + (i + 1)).val() + "" });
                            } else if (respuesta != null && respuesta != "undefined") {
                                if (i == 2 || i == 3) {
                                    respuestas.push({ CedulaEvaluacionId: parseInt(model.id), Pregunta: (i + 1), Respuesta: (respuesta == "true"), Detalles: $("#detalle" + (i + 1)).val() });
                                } else {
                                    respuestas.push({ CedulaEvaluacionId: parseInt(model.id), Pregunta: (i + 1), Respuesta: (respuesta == "true"), Detalles: null });
                                }
                            }
                        }

                        axios.post("/transporte/evaluation", respuestas).then(response => {
                            if (response.status == 200) {
                                Swal.fire({
                                    'icon': "success",
                                    'title': 'Servicio de Transporte de Personal',
                                    'html': "Se guardaron las respuestas de la cédula correctamente."
                                });
                            } else {
                                Swal.fire({
                                    'icon': "error",
                                    'title': 'Servicio de Transporte de Personal',
                                    'html': "Hubo un error al guardar la(s) respuesta(s) de la cédula. Contacte al Administrador del Sistema"
                                 });
                            }
                        });
                    });
                /*FIN de guardar la cedula*/

                /*Guardar la Cedula sin mensaje*/
                function guardaCedula() {
                    var respuestas = new Array();
                    for (let i = 0; i < 7; i++) {
                        let type = $('.pregunta' + (i + 1)).attr("type");
                        let respuesta = $("input[name=pregunta" + (i + 1) + "]:checked").val();
                        if (type == "date" && $(".pregunta" + (i + 1)).val()) {
                            respuestas.push({ CedulaEvaluacionId: parseInt(model.id), Pregunta: (i + 1), Respuesta: "true", Detalles: $(".pregunta" + (i + 1)).val() + "" });
                        } else if (respuesta != null || respuesta != '') {
                            if (i == 2 || i == 3) {
                                respuestas.push({ CedulaEvaluacionId: parseInt(model.id), Pregunta: (i + 1), Respuesta: (respuesta == "true"), Detalles: $("#detalle" + (i + 1)).val() });
                            } else {
                                respuestas.push({ CedulaEvaluacionId: parseInt(model.id), Pregunta: (i + 1), Respuesta: (respuesta == "true"), Detalles: null });
                            }
                        }
                    }

                    axios.post("/transporte/evaluation", respuestas).then(response => {
                        if (response.status == 200) {

                        } else {
                            Swal.fire({
                                'icon': "error",
                                'title': 'Servicio de Transporte de Personal',
                                'html': "Hubo un error al guardar las respuestas de la cédula. Contacte al Administrador del Sistema"
                            });
                        }
                    });
                }
            /*FIN de guardar la cedula*/
         
                /*Validamos que ya fueron adjuntados todos los entregables*/
                function validaEntregables() {
                    var msgEntregables = ["Factura", "Validación del SAT"];
                    var entregables = ["Factura", "SAT"];
                    var msg = "";
                    var nota = false;
                    var found = false;
                    axios.get('/transporte/getListadoEntregables/' + model.id + "/" + model.servicioId).then(response => {
                        for (var j = 0; j < entregables.length; j++) {
                            for (var i = 0; i < response.data.length; i++) {
                                if (entregables[j] == response.data[i].tipo) {
                                    found = true;
                                    break;
                                } else {
                                    found = false;
                                }
                            }
                            if (!found) {
                                msg += "<strong> - "+msgEntregables[j]+"<br/></strong>";
                            }
                        }

                        if (msg != "") {
                            Swal.fire({
                                'icon': 'error',
                                'title': 'Servicio de Transporte de Personal',
                                'html': 'Para enviar la cédula a la DAS, es necesario adjuntar los siguientes entregables: <br/><br/>' + msg
                            });
                            return false;
                        } else {
                             axios.post('/transporte/historialTransporte', {
                                ServicioId: model.servicioId,
                                CedulaId: model.id, UsuarioId: parseInt(@User.Claims.ElementAt(0).Value),
                                Estatus: "Enviado a DAS", Comentarios: "Se envía la cédula a la DAS para su revisión."
                             }).then(response => {
                                 axios.post("/transporte/sendCedula/" + model.servicioId + "/" + model.id).then(response => {
                                     if (response.status == 200) {
                                         Swal.fire({
                                             'icon': "success",
                                             'title': 'Servicio de Transporte de Personal',
                                             'html': "Se envió la cédula para su revisión correctamente."
                                         }).then(function () {
                                             window.location.href = "/transporte/index";
                                         });
                                     } else {
                                         Swal.fire({
                                             'icon': "error",
                                             'title': 'Servicio de Transporte de Personal',
                                             'html': "Hubo un error al guardar las respuestas de la cédula. Contacte al Administrador del Sistema"
                                         });
                                     }
                                 });
                             });
                        }
                    });
                }

                /*FIN Validamos que ya fueron adjuntados todos los entregables*/

                /*Enviar la Cedula*/
                    $('.btn_enviar').click(function () {
                        let respuesta = false;
                        if (model.facturas.length == 0) {
                            Swal.fire({
                                'icon': 'error',
                                'title': 'Servicio de Transporte de Personal',
                                'html': 'No ha registrado ninguna factura en la cédula'
                            });
                            return false;
                        }

                        guardaCedula();

                        for (i = 0; i < 7; i++) {
                            isContinue = true;
                            respuesta = $('input:radio[name="pregunta' + (i + 1) + '"]:checked').val();
                            if (respuesta == "" && i != 0) {
                                isContinue = false;
                                break;
                            } else if ($("#detalle" + (i + 1)).val() == "" && respuesta == "false") {
                                isContinue = false;
                                break;
                            }else if (i == 0 && $('.pregunta' + (i + 1)).val() == '') {
                                isContinue = false;
                                break;
                            } else if ((i == 1 || i == 4 || i == 5) && respuesta == "false") {
                                isContinue = cuentaincidenciasTransporte((i + 1));
                                if (isContinue == false) {
                                    break;
                                }
                            }
                        }

                        if (i != 0 && isContinue == false) {
                            if (i != 0 && respuesta == "") {
                                Swal.fire({
                                    'icon': 'error',
                                    'title': 'Servicio de Transporte de Personal',
                                    'html': 'No ha capturado la <strong>Pregunta ' + (i + 1) + '</strong>'
                                });
                            }else if($("#detalle" + (i + 1)).val() == "" && respuesta == "false") {
                                Swal.fire({
                                    'icon': 'error',
                                    'title': 'Servicio de Transporte de Personal',
                                    'html': 'No ha capturado los comentarios en la <strong>Pregunta ' + (i + 1) + '</strong>'
                                });
                            } else if (i == 1 || i == 4 || i == 5) {
                                Swal.fire({
                                    'icon': 'error',
                                    'title': 'Servicio de Transporte de Personal',
                                    'html': 'No ha capturado incidencias en la <strong>Pregunta ' + (i + 1) + '</strong>'
                                });
                            }
                        } else if (i == 0) {
                            Swal.fire({
                                'icon': 'error',
                                'title': 'Servicio de Transporte de Personal',
                                'html': 'No ha capturado la fecha de cierre en la <strong>Pregunta ' + (i + 1) + '</strong>'
                            });
                        } else {
                            $('.btn_enviar').attr('disabled', true);
                            $('.btn_guardar').attr('disabled', true);
                            if (validaEntregables()) {
                                location.reload();
                            }
                        }
                    });
                /*Enviar de guardar la cedula*/

            /********************************** FIN GUARDAR/ENVIAR CÉDULA **********************************/
        });
    </script>
}